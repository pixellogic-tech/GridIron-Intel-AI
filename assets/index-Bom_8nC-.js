import{j as e,L as K,B as X,T as Ce,C as _e,U as ce,V as ae,S as Ge,R as He,r as n,G as Te,a as We,b as xe,D as ue,M as ie,c as Ke,d as gs,W as hs,e as ps,f as fs,g as bs,h as ys,i as Se,X as O,k as re,l as I,m as Me,n as js,o as vs,p as Ns,Y as ws,q as De,s as Re,t as $e,Z as ks,u as ke,v as Fe,w as Cs,x as Ss,y as Ae,z as Ve,A as Qe,E as ge,F as ze,H as ne,I as he,J as le,K as Je,P as As,N as Xe,O as Ze,Q as Pe,_ as es,$ as Ps,a0 as ss,a1 as ts,a2 as as,a3 as me,a4 as rs,a5 as Is,a6 as Ts,a7 as Ms,a8 as Ds,a9 as Rs,aa as zs,ab as Es,ac as ns,ad as Ie,ae as Ls,af as Gs,ag as $s,ah as Fs,ai as Os,aj as Bs,ak as Us,al as Ys,am as qs,an as _s,ao as Hs,ap as Ws,aq as Ks,ar as Vs,as as te,at as Qs}from"./vendor-D85pBjQ6.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const x of t)if(x.type==="childList")for(const o of x.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function l(t){const x={};return t.integrity&&(x.integrity=t.integrity),t.referrerPolicy&&(x.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?x.credentials="include":t.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function c(t){if(t.ep)return;t.ep=!0;const x=l(t);fetch(t.href,x)}})();const Js=()=>{const s=()=>e.jsx("nav",{className:"fixed top-0 w-full bg-black/80 backdrop-blur-lg z-50 border-b border-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx(K,{to:"/",className:"flex items-center gap-2",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:"ðŸˆ Gridiron Intel"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[e.jsx("a",{href:"#features",className:"text-gray-300 hover:text-brand-accent transition",children:"Features"}),e.jsx("a",{href:"#demo",className:"text-gray-300 hover:text-brand-accent transition",children:"Demo & Pricing"}),e.jsx(K,{to:"/login",className:"text-gray-300 hover:text-brand-accent transition",children:"Login"}),e.jsx(K,{to:"/login",className:"bg-brand-primary hover:bg-brand-dark px-5 py-2 rounded-lg font-semibold transition text-white",children:"Get Started"})]})]})})}),a=()=>e.jsxs("section",{className:"relative min-h-screen flex items-center justify-center text-white overflow-hidden pt-16",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-grid-slate-900/[0.4]"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center bg-black [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),e.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-brand-primary/20 rounded-full filter blur-3xl opacity-50 animate-[float_8s_ease-in-out_infinite]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-brand-accent/20 rounded-full filter blur-3xl opacity-50 animate-[float_8s_ease-in-out_infinite_4s]"}),e.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-4 text-center",children:[e.jsx("div",{className:"inline-block bg-brand-accent/10 border border-brand-accent px-4 py-2 rounded-full mb-6",children:e.jsx("span",{className:"text-brand-accent font-semibold",children:"BUILT FOR THE 2026 SEASON"})}),e.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"The Ultimate Football Intelligence Platform"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-10",children:"Leverage AI-powered film analysis, predictive insights, and seamless team management to dominate the competition. Save time, win games."}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx(K,{to:"/login",className:"bg-brand-primary hover:bg-brand-dark text-white px-8 py-4 rounded-lg font-bold transition text-lg",children:"Coach Login"}),e.jsx(K,{to:"/login",className:"border border-gray-700 hover:bg-gray-800 text-white px-8 py-4 rounded-lg font-bold transition text-lg",children:"Player Login"})]})]})]}),l=({icon:o,title:i,description:d})=>e.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-xl border border-gray-800 hover:border-brand-primary transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"mb-4 inline-block p-3 bg-brand-primary/10 rounded-lg",children:e.jsx(o,{className:"w-7 h-7 text-brand-accent"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:i}),e.jsx("p",{className:"text-gray-400",children:d})]}),c=()=>e.jsx("section",{id:"features",className:"py-24 bg-black text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"The Coach's AI Advantage"}),e.jsx("p",{className:"text-lg text-gray-400",children:"Everything you need to out-prepare and out-perform."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsx(l,{icon:X,title:"AI Film Analysis",description:"Automatically tag formations, plays, and player performance from your game film in minutes, not hours."}),e.jsx(l,{icon:Ce,title:"Predictive Analytics",description:"Uncover opponent tendencies and get AI-powered play suggestions based on down, distance, and situation."}),e.jsx(l,{icon:_e,title:"Player Performance Metrics",description:"Track individual player stats, progress, and areas for improvement with detailed, visualized data."}),e.jsx(l,{icon:ce,title:"Team & Player Portals",description:"Centralize communication, assignments, and film review with secure logins for your entire team."}),e.jsx(l,{icon:ae,title:"Auto-Generated Highlights",description:"Create professional recruiting reels for any player with one click, ready to be shared with college scouts."}),e.jsx(l,{icon:Ge,title:"Secure & Controlled",description:"You control who sees your data. Manage access for coaches and players with an admin-approved system."})]})]})}),t=()=>{const[o,i]=He.useState(!1),d=m=>{m.preventDefault(),i(!0)};return e.jsxs("section",{id:"demo",className:"py-24 bg-black text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60rem] h-[60rem] bg-brand-accent/10 rounded-full filter blur-3xl opacity-30"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"See It In Action"}),e.jsx("p",{className:"text-lg text-gray-400 max-w-3xl mx-auto",children:"For custom pricing and to see the power of Gridiron Intel firsthand, schedule a live, on-site demo with our team. We'll bring the platform to you."})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:o?e.jsxs("div",{className:"bg-green-500/10 border border-green-500 text-green-300 p-8 rounded-xl text-center animate-[fadeIn_0.5s_ease-in-out]",children:[e.jsx(Ge,{className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-lg",children:"Your demo request has been submitted. A Gridiron Intel representative will contact you within one business day to schedule your on-site presentation."})]}):e.jsxs("form",{onSubmit:d,className:"bg-gray-900/50 p-8 rounded-xl border border-gray-800 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"schoolName",className:"block text-sm font-medium text-gray-400 mb-2",children:"School Name"}),e.jsx("input",{type:"text",id:"schoolName",name:"schoolName",required:!0,placeholder:"e.g., Central High School",className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"coachName",className:"block text-sm font-medium text-gray-400 mb-2",children:"Coach/Director Name"}),e.jsx("input",{type:"text",id:"coachName",name:"coachName",required:!0,placeholder:"e.g., Coach Taylor",className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,placeholder:"coach@school.edu",className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-400 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",required:!0,placeholder:"(555) 123-4567",className:"w-full p-3 bg-gray-800 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full py-4 bg-brand-primary hover:bg-brand-dark rounded-lg font-bold text-lg transition",children:"Schedule My Demo"})})]})})]})]})},x=()=>e.jsx("footer",{className:"bg-gray-900/50 py-12 text-white border-t border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400",children:[e.jsx("p",{children:"Â© 2025 Gridiron Intel. The Future of Football is Here."}),e.jsx("p",{className:"text-sm mt-2",children:"Contact: (870) 522-8421 | gridiron-intel2025@protonmail.com"}),e.jsx("p",{className:"text-sm mt-2",children:e.jsx(K,{to:"/admin/login",className:"hover:text-brand-accent",children:"Admin Login"})})]})});return e.jsxs("div",{className:"bg-black",children:[e.jsx(s,{}),e.jsxs("main",{children:[e.jsx(a,{}),e.jsx(c,{}),e.jsx(t,{})]}),e.jsx(x,{})]})};function pe(s){let a="";const l=s.byteLength;for(let c=0;c<l;c++)a+=String.fromCharCode(s[c]);return btoa(a)}function fe(s){const a=atob(s),l=a.length,c=new Uint8Array(l);for(let t=0;t<l;t++)c[t]=a.charCodeAt(t);return c}async function be(s,a,l,c){const t=new Int16Array(s.buffer),x=t.length/c,o=a.createBuffer(c,x,l);for(let i=0;i<c;i++){const d=o.getChannelData(i);for(let m=0;m<x;m++)d[m]=t[m*c+i]/32768}return o}var Oe={};const Xs={opponentName:"Northwood Panthers",reportBody:`### Offensive Tendencies
- Favors 'Spread' offense, utilizing RPOs on 70% of 1st downs.
- QB #7 is mobile to his right but stares down his primary target.
- Limited route tree, heavily reliant on 'Slant' and 'Go' routes.

### Defensive Tendencies
- Primarily a 'Cover 3' zone defense, vulnerable to underneath passes.
- Susceptible to screen passes, especially to the wide side of the field.
- DE #92 has a slow get-off but a powerful bull rush.`},Zs=[{name:"Game 1",offYards:380,defStops:8},{name:"Game 2",offYards:420,defStops:10},{name:"Game 3",offYards:350,defStops:7},{name:"Game 4",offYards:480,defStops:12},{name:"Game 5",offYards:520,defStops:14},{name:"Game 6",offYards:450,defStops:11}],Ee=[{id:1,name:"J. Williams",position:"QB",avatar:"JW",mainMetricName:"Completion %",age:17,height:`6'2"`,parentsName:"Sarah Williams",phone:"555-123-4567",notes:"Natural leader, film junkie. Needs work on reading blitz packages.",academicInfo:"3.8 GPA, interested in Engineering",stats:[{name:"Completion %",value:"72%",trend:"+4%"},{name:"Passer Rating",value:108.5},{name:"Passing TDs",value:18}],radarData:[{subject:"Pass Yards",value:85,avg:70,fullMark:100},{subject:"Completion %",value:72,avg:65,fullMark:100},{subject:"TDs",value:90,avg:60,fullMark:100},{subject:"Rating",value:80,avg:75,fullMark:100},{subject:"Decision Making",value:75,avg:65,fullMark:100}]},{id:2,name:"M. Davis",position:"WR",avatar:"MD",mainMetricName:"Yards After Catch",academicInfo:"3.5 GPA, interested in Business",stats:[{name:"Receptions",value:45},{name:"YAC",value:"8.2 avg"},{name:"Receiving TDs",value:7}],radarData:[{subject:"Routes",value:90,avg:75,fullMark:100},{subject:"Hands",value:95,avg:80,fullMark:100},{subject:"YAC",value:82,avg:70,fullMark:100},{subject:"Blocking",value:65,avg:60,fullMark:100},{subject:"Separation",value:88,avg:75,fullMark:100}]},{id:3,name:"T. Rodriguez",position:"MLB",avatar:"TR",mainMetricName:"Tackle Success Rate",academicInfo:"3.2 GPA, interested in Sports Medicine",stats:[{name:"Tackles",value:88},{name:"Tackle Success %",value:"92%",trend:"+2%"},{name:"Sacks",value:4}],radarData:[{subject:"Tackling",value:92,avg:80,fullMark:100},{subject:"Play Recognition",value:88,avg:75,fullMark:100},{subject:"Coverage",value:70,avg:65,fullMark:100},{subject:"Pass Rush",value:75,avg:60,fullMark:100},{subject:"Instincts",value:90,avg:80,fullMark:100}]}],et=[{id:101,name:"K. Anderson",position:"QB",avatar:"KA",notes:"Stares down primary receiver. Not comfortable under pressure.",clips:[{id:1,title:"vs. Central High (Week 6)"}]},{id:102,name:"L. Chen",position:"RB",avatar:"LC",notes:"Powerful downhill runner, but limited lateral speed.",clips:[]},{id:103,name:"B. Miller",position:"DE",avatar:"BM",notes:"Excellent bull rush, but susceptible to cut blocks.",clips:[{id:1,title:"vs. Central High (Week 6)"},{id:2,title:"vs. Roosevelt High (Week 5)"}]}],st=[{id:1,name:"Flood Concept",type:"Offense",subType:"Pass",formation:"Spread",description:"Floods one side with 3 routes at different depths to stress zone coverage.",formationMarkers:[{id:"qb1",type:"offense",label:"QB",x:50,y:85},{id:"wr1",type:"offense",label:"WR",x:15,y:60},{id:"te1",type:"offense",label:"TE",x:40,y:62},{id:"wr2",type:"offense",label:"WR",x:85,y:60}],paths:[{markerId:"wr1",points:[{x:15,y:60},{x:15,y:40},{x:35,y:20}]},{markerId:"te1",points:[{x:40,y:62},{x:40,y:50},{x:25,y:50}]},{markerId:"wr2",points:[{x:85,y:60},{x:70,y:60}]}]},{id:2,name:"HB Dive",type:"Offense",subType:"Run",formation:"I-Form",description:"A direct handoff to the halfback running through an interior gap.",formationMarkers:[{id:"qb2",type:"offense",label:"QB",x:50,y:85},{id:"rb2",type:"offense",label:"RB",x:50,y:90}],paths:[{markerId:"rb2",points:[{x:50,y:90},{x:50,y:65}]}]},{id:3,name:"Cover 3 Buzz",type:"Defense",subType:"Zone",formation:"4-3",description:"Zone defense with 3 deep defenders and a safety rotating down to cover short passes.",formationMarkers:[{id:"s1",type:"defense",label:"S",x:50,y:20},{id:"s2",type:"defense",label:"S",x:25,y:35},{id:"cb1",type:"defense",label:"CB",x:10,y:30},{id:"cb2",type:"defense",label:"CB",x:90,y:30}],paths:[{markerId:"s2",points:[{x:25,y:35},{x:30,y:50}]}]}],tt=[{id:1,name:"Box Squats",description:"Focus on explosive power out of the bottom.",sets:"4",reps:"6-8"},{id:2,name:"Bench Press",description:"Maintain a stable base, drive with your legs.",sets:"4",reps:"6-8"},{id:3,name:"Power Cleans",description:"Focus on triple extension: ankles, knees, and hips.",sets:"5",reps:"3"},{id:4,name:"Route Tree Drills",description:"Run the full route tree (0-9). Focus on sharp cuts and sinking hips.",sets:"2",reps:"Full Tree"}],at=[{id:1,title:"vs. Central High (Week 6)",status:"complete",summary:"Our offensive line's pass protection against their 3-man rush was a liability. The 'HB Screen' play was highly effective, averaging 9.5 yards. We must adjust our protection schemes immediately.",detailedAnalysis:`### Offensive Performance
- **Strengths:** High success rate on 1st down runs (5.8 YPC).
- **Weaknesses:** Struggled in red zone, converting only 1 of 4 attempts. Pass protection against 3-man rush was poor.

### Defensive Performance
- **Strengths:** Excellent containment of mobile QBs.
- **Weaknesses:** Vulnerable to play-action passes, gave up 3 explosive plays >20 yards.

### Key Player Notes
- **Standout Performer:** RB #22, consistently broke tackles.
- **Needs Improvement:** RT #74, struggled with speed rushers.

### Actionable Insights
- Implement new pass protection scheme for 3-man fronts.
- Focus on red zone play execution in practice.`,errorDetection:[{id:"err1",category:"Offensive Line",description:"Left Tackle missed block on crucial 3rd down.",suggestedDrill:"Pass Protection Fundamentals",mockClipLink:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"},{id:"err2",category:"QB Reads",description:"Quarterback held ball too long, missed open receiver in flat.",suggestedDrill:"Quick Game Reads",mockClipLink:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"}]},{id:2,title:"vs. Roosevelt High (Week 5)",status:"complete",summary:"Dominated the line of scrimmage, with our RB gaining 180 yards. Their offense was predictable, relying on QB runs in 3rd-and-short situations. Special teams coverage was a weakness, allowing a 60-yard kick return.",detailedAnalysis:"Detailed analysis available."},{id:3,title:"vs. Eastside Eagles (Week 4)",status:"pending"}],rt=(s,a)=>{let l=parseInt(s.substring(1,3),16),c=parseInt(s.substring(3,5),16),t=parseInt(s.substring(5,7),16);l=Math.floor(l*(100-a)/100),c=Math.floor(c*(100-a)/100),t=Math.floor(t*(100-a)/100),l=l<0?0:l,c=c<0?0:c,t=t<0?0:t;const x=l.toString(16).length===1?"0"+l.toString(16):l.toString(16),o=c.toString(16).length===1?"0"+c.toString(16):c.toString(16),i=t.toString(16).length===1?"0"+t.toString(16):t.toString(16);return"#"+x+o+i},H=s=>{console.error("API Error:",s);let a;if(s instanceof Error)a=s.message;else if(s&&typeof s=="object"&&"message"in s)a=String(s.message);else if(typeof s=="string")a=s;else return"An unknown error occurred. Please check the console for details.";return a.includes("429")||a.includes("RESOURCE_EXHAUSTED")?"You've exceeded your request limit. Please wait a moment before trying again. For more info, check your Google AI Studio plan and billing details.":a.includes("400")||a.includes("INVALID_ARGUMENT")?"There was an issue with the request. Please check your input and try again. The API returned: "+a:a.includes("Requested entity was not found")||a.includes("API key not valid")?"There's an issue with the API key. Please ensure it's correctly configured and has access to the requested models. You might need to re-select your API key in settings if using Veo models.":a},ye=({formationMarkers:s,paths:a,onMarkerMouseDown:l,activePath:c})=>e.jsxs("div",{className:"relative w-full aspect-[5/3] bg-green-800 bg-opacity-50 border-2 border-gray-600 rounded-md overflow-hidden select-none",children:[[10,20,30,40,50,60,70,80,90].map(t=>e.jsx("div",{className:"absolute h-full border-r border-white/20",style:{left:`${t}%`}},t)),e.jsxs("svg",{width:"100%",height:"100%",className:"absolute top-0 left-0",children:[a.map(t=>{const x=t.points.map(o=>`${o.x}%,${o.y}%`).join(" ");return e.jsx("polyline",{points:x,stroke:"yellow",strokeWidth:"2",fill:"none",strokeDasharray:"4 4"},t.markerId)}),c&&e.jsx("polyline",{points:c.points.map(t=>`${t.x}%,${t.y}%`).join(" "),stroke:"yellow",strokeWidth:"2.5",fill:"none"})]}),s.map(t=>e.jsx("div",{onMouseDown:l?x=>l(x,t.id):void 0,className:`absolute -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border-2 ${t.type==="offense"?"bg-blue-500 border-blue-300":"bg-red-600 border-red-300"} ${l?"cursor-grab":""}`,style:{left:`${t.x}%`,top:`${t.y}%`},children:t.label},t.id))]}),nt=({ai:s})=>{const[a,l]=n.useState(1),[c,t]=n.useState(10),[x,o]=n.useState(25),[i,d]=n.useState("12:00"),[m,u]=n.useState(null),[r,g]=n.useState(!1),[h,p]=n.useState(""),j=async()=>{if(!s)return;g(!0),u(null),p("");const k=`You are an expert football play-caller AI. Given the following game situation, predict the opponent's most likely play call.
        
        Game State:
        - Down: ${a}
        - Distance: ${c} yards
        - Field Position: Own ${x} yard line
        - Time Remaining in Quarter: ${i}
        
        Based on standard football strategy and situational tendencies, provide your analysis. Return your response as a JSON object with the following structure: { "playType": "Run" or "Pass", "confidence": number (0-100), "analysis": "Your brief reasoning here." }.`;try{const v=await s.models.generateContent({model:"gemini-2.5-pro",contents:k,config:{responseMimeType:"application/json",responseSchema:{type:I.OBJECT,properties:{playType:{type:I.STRING},confidence:{type:I.NUMBER},analysis:{type:I.STRING}},required:["playType","confidence","analysis"]}}}),R=JSON.parse(v.text);u(R)}catch(v){p(H(v))}finally{g(!1)}};return e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white border-b border-gray-700 pb-3 mb-3 flex items-center gap-2",children:[e.jsx(ks,{})," Live Play Predictor"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Down"}),e.jsxs("select",{value:a,onChange:k=>l(Number(k.target.value)),className:"w-full bg-gray-700 p-2 rounded-lg text-center font-bold",children:[e.jsx("option",{children:"1"}),e.jsx("option",{children:"2"}),e.jsx("option",{children:"3"}),e.jsx("option",{children:"4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Distance"}),e.jsx("input",{type:"number",value:c,onChange:k=>t(Number(k.target.value)),className:"w-full bg-gray-700 p-2 rounded-lg text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Yard Line"}),e.jsxs("div",{className:"flex items-center bg-gray-700 rounded-lg",children:[e.jsx("span",{className:"text-gray-400 pl-2 text-sm",children:"Own"}),e.jsx("input",{type:"number",value:x,onChange:k=>o(Number(k.target.value)),className:"w-full bg-transparent p-2 text-center font-bold focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400",children:"Time Left"}),e.jsx("input",{type:"text",value:i,onChange:k=>d(k.target.value),placeholder:"e.g., 2:30",className:"w-full bg-gray-700 p-2 rounded-lg text-center font-bold"})]})]}),e.jsx("button",{onClick:j,disabled:r||!s,className:"w-full bg-brand-primary hover:bg-brand-dark font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition disabled:bg-gray-600",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin"}),"Getting Prediction..."]}):"Get AI Prediction"}),h&&e.jsx("div",{className:"bg-red-500/20 text-red-300 text-sm p-3 rounded-lg",children:h}),m&&e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border border-gray-700 animate-[fadeIn_0.5s_ease-in-out]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Predicted Play: ",e.jsx("span",{className:m.playType==="Pass"?"text-blue-400":"text-green-400",children:m.playType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-2xl text-brand-accent",children:[m.confidence,"%"]}),e.jsx("p",{className:"text-xs text-gray-400 -mt-1",children:"Confidence"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm text-gray-300 flex items-center gap-1",children:[e.jsx(We,{size:14})," Analysis:"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:m.analysis})]})]})]})},lt=({ai:s})=>{const[a,l]=n.useState(null),[c,t]=n.useState(!0),[x,o]=n.useState(null),i=(d,m=24)=>{const u=d.toLowerCase();return u.includes("sun")||u.includes("clear")?e.jsx(Rs,{size:m,className:"text-yellow-400"}):u.includes("cloud")?e.jsx(ke,{size:m,className:"text-gray-400"}):u.includes("rain")||u.includes("shower")?e.jsx(zs,{size:m,className:"text-blue-400"}):u.includes("snow")?e.jsx(Es,{size:m,className:"text-white"}):u.includes("wind")?e.jsx(Fe,{size:m,className:"text-gray-300"}):e.jsx(ke,{size:m,className:"text-gray-400"})};return n.useEffect(()=>{if(!s){o("AI client not available."),t(!1);return}const d=(m,u)=>{const r=`Provide the current weather and a 3-day forecast for latitude ${m} and longitude ${u}. Your response must be in JSON format and adhere to the provided schema. Use abbreviated day names (e.g., 'Mon', 'Tue').`;s.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:I.OBJECT,properties:{current:{type:I.OBJECT,properties:{temp:{type:I.NUMBER,description:"Temperature in Fahrenheit"},condition:{type:I.STRING},wind:{type:I.NUMBER,description:"Wind speed in mph"},humidity:{type:I.NUMBER,description:"Humidity in percentage"}},required:["temp","condition","wind","humidity"]},forecast:{type:I.ARRAY,items:{type:I.OBJECT,properties:{day:{type:I.STRING},high:{type:I.NUMBER,description:"High temperature in Fahrenheit"},low:{type:I.NUMBER,description:"Low temperature in Fahrenheit"},condition:{type:I.STRING}},required:["day","high","low","condition"]}}},required:["current","forecast"]}}}).then(g=>{try{const h=JSON.parse(g.text);l(h)}catch{o("Failed to parse weather data.")}}).catch(g=>{o(H(g))}).finally(()=>{t(!1)})};navigator.geolocation.getCurrentPosition(m=>{d(m.coords.latitude,m.coords.longitude)},()=>{o("Geolocation is required for the weather forecast."),t(!1)})},[s]),e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white border-b border-gray-700 pb-3 mb-3 flex items-center gap-2",children:[e.jsx(ke,{})," Weather Forecast"]}),c&&e.jsx("div",{className:"text-center text-gray-400",children:"Fetching weather..."}),x&&e.jsx("div",{className:"bg-red-500/20 text-red-300 text-sm p-3 rounded-lg",children:x}),a&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[i(a.current.condition,48),e.jsxs("div",{children:[e.jsxs("p",{className:"text-4xl font-bold",children:[Math.round(a.current.temp),"Â°F"]}),e.jsx("p",{className:"text-gray-400",children:a.current.condition})]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"flex items-center justify-end gap-2",children:[e.jsx(Fe,{size:16})," ",a.current.wind," mph"]}),e.jsxs("p",{className:"flex items-center justify-end gap-2",children:[e.jsx(Cs,{size:16})," ",a.current.humidity,"% humidity"]})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 text-center",children:a.forecast.slice(0,3).map((d,m)=>e.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-bold",children:d.day}),e.jsx("div",{className:"my-2 mx-auto w-fit",children:i(d.condition,32)}),e.jsxs("p",{className:"font-semibold",children:[Math.round(d.high),"Â° / ",Math.round(d.low),"Â°"]})]},m))})]})]})},oe=({title:s,value:a,trend:l,color:c})=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center transition-transform hover:-translate-y-1",children:[e.jsx("div",{className:`text-3xl font-bold ${c}`,children:a}),e.jsx("div",{className:"text-gray-400 text-sm mt-2",children:s}),e.jsx("div",{className:`${c} text-xs mt-1`,children:l})]}),it=()=>e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Team Performance Trends"}),e.jsx("div",{className:"h-80",children:e.jsx(Me,{width:"100%",height:"100%",children:e.jsxs(js,{data:Zs,children:[e.jsx(vs,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(Ns,{dataKey:"name",tick:{fill:"#9ca3af"}}),e.jsx(ws,{tick:{fill:"#9ca3af"}}),e.jsx(De,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151"}}),e.jsx(Re,{wrapperStyle:{color:"#fff"}}),e.jsx($e,{type:"monotone",dataKey:"offYards",name:"Offensive Yards",stroke:"var(--color-brand-accent)",strokeWidth:2}),e.jsx($e,{type:"monotone",dataKey:"defStops",name:"Defensive Stops",stroke:"#3b82f6",strokeWidth:2})]})})})]}),ot=({players:s,onAddPlayer:a,onComparePlayers:l,onCreateAccounts:c,onDeletePlayer:t,searchQuery:x,setSearchQuery:o,positionFilter:i,setPositionFilter:d,positions:m})=>{const u=ge();return e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ce,{})," Player Roster"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:l,title:"Compare Players",className:"p-2 rounded-full hover:bg-gray-700 transition",children:e.jsx(ze,{size:20})}),e.jsx("button",{onClick:c,title:"Create Player Accounts",className:"p-2 rounded-full hover:bg-gray-700 transition",children:e.jsx(ce,{size:20})}),e.jsx("button",{onClick:a,title:"Add Player",className:"p-2 rounded-full hover:bg-gray-700 transition",children:e.jsx(ne,{size:20})})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search by name...",value:x,onChange:r=>o(r.target.value),className:"w-full bg-gray-700 p-2 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary"}),e.jsx("select",{value:i,onChange:r=>d(r.target.value),className:"w-full sm:w-40 bg-gray-700 p-2 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary",children:m.map(r=>e.jsx("option",{value:r,children:r},r))})]})}),e.jsx("div",{className:"p-6 space-y-3 max-h-60 overflow-y-auto",children:s.length>0?s.map(r=>e.jsxs("div",{className:"w-full flex items-center justify-between p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition group",children:[e.jsxs("button",{onClick:()=>u(`/player/${r.id}`),className:"flex-grow flex items-center gap-3 text-left",children:[e.jsx("div",{className:"w-10 h-10 bg-brand-primary rounded-full flex items-center justify-center font-bold",children:r.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:r.name}),e.jsx("div",{className:"text-xs text-gray-400",children:r.position})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-lg font-bold text-brand-accent",children:r.stats[0].value}),e.jsx("div",{className:"text-xs text-gray-400",children:r.stats[0].name})]}),e.jsx("button",{onClick:()=>t(r.id),className:"text-gray-500 hover:text-red-500 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(re,{size:18})})]})]},r.id)):e.jsx("p",{className:"text-gray-400 text-center",children:"No players match the current filters."})})]})},dt=()=>{const[s,a]=n.useState([{id:1,text:"Review film from Central High game",completed:!1},{id:2,text:"Prepare scout for Roosevelt High",completed:!1},{id:3,text:"Finalize practice plan for Tuesday",completed:!0}]),[l,c]=n.useState(""),[t,x]=n.useState(null),o=()=>{if(l.trim()==="")return;const r={id:Date.now(),text:l,completed:!1};a([...s,r]),c("")},i=r=>{a(s.filter(g=>g.id!==r))},d=()=>{if(!t)return;const r=t.id;a(s.map(g=>g.id===r?{...g,completed:!0,justCompleted:!0}:g)),setTimeout(()=>{a(g=>g.map(h=>h.id===r?{...h,justCompleted:!1}:h))},1e3),x(null)},m=r=>{const g=s.find(h=>h.id===r);g&&(g.completed?a(s.map(h=>h.id===r?{...h,completed:!1,justCompleted:!1}:h)):x(g))},u=r=>{r.key==="Enter"&&o()};return e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg relative",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-700",children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ss,{})," Task Management"]})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:r=>c(r.target.value),onKeyPress:u,placeholder:"Add new task...",className:"w-full bg-gray-700 p-2 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary"}),e.jsx("button",{onClick:o,className:"bg-brand-primary p-2 rounded-lg hover:bg-brand-dark",children:e.jsx(Ae,{})})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:s.map(r=>e.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-all duration-300 group ${r.justCompleted?"!bg-green-500/20":""}`,children:[e.jsxs("div",{onClick:()=>m(r.id),className:`flex items-center gap-3 flex-grow cursor-pointer ${r.completed?"bg-gray-700/50 text-gray-500":"bg-gray-700 hover:bg-gray-600"} p-1 rounded-md`,children:[e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx(Ve,{className:`w-5 h-5 transition-colors ${r.completed?"text-green-500":"text-gray-500"}`}),r.justCompleted&&e.jsx("div",{className:"absolute inset-0 bg-green-400 rounded-full animate-ping opacity-75"})]}),e.jsx("span",{className:`${r.completed?"line-through":""}`,children:r.text})]}),e.jsx("button",{onClick:()=>i(r.id),className:"ml-auto text-gray-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(re,{size:16})})]},r.id))})]}),t&&e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center rounded-xl z-10 p-4",children:e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm text-center animate-[fadeIn_0.2s_ease-in-out]",children:[e.jsx(Qe,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Confirm Completion"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Are you sure you want to mark this task as complete?"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>x(null),className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-semibold transition",children:"Cancel"}),e.jsx("button",{onClick:d,className:"px-6 py-2 bg-green-600 hover:bg-green-700 rounded-md font-semibold transition",children:"Confirm"})]})]})})]})},ct=({players:s,onViewDetails:a,onAddOpponent:l,onDeleteOpponent:c})=>{const[t,x]=n.useState(""),[o,i]=n.useState(!1),[d,m]=n.useState(""),[u,r]=n.useState(""),g=s.filter(p=>p.name.toLowerCase().includes(t.toLowerCase())),h=()=>{d&&u&&(l(d,u),m(""),r(""),i(!1))};return e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(he,{})," Opponent Roster"]}),e.jsx("button",{onClick:()=>i(!o),className:"p-2 rounded-full hover:bg-gray-700 transition",children:o?e.jsx(O,{size:20}):e.jsx(ne,{size:20})})]}),e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsx("input",{type:"text",value:t,onChange:p=>x(p.target.value),placeholder:"Search opponent players...",className:"w-full bg-gray-700 p-2 rounded-lg border border-gray-600"})}),o&&e.jsxs("div",{className:"p-4 border-b border-gray-700 space-y-2 bg-gray-700/50",children:[e.jsx("input",{type:"text",value:d,onChange:p=>m(p.target.value),placeholder:"Player Name",className:"w-full bg-gray-600 p-2 rounded-lg"}),e.jsx("input",{type:"text",value:u,onChange:p=>r(p.target.value),placeholder:"Position",className:"w-full bg-gray-600 p-2 rounded-lg"}),e.jsx("button",{onClick:h,className:"w-full bg-brand-primary hover:bg-brand-dark p-2 rounded-lg font-semibold",children:"Add Opponent"})]}),e.jsx("div",{className:"p-6 space-y-3 max-h-48 overflow-y-auto",children:g.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 bg-red-600 rounded-full flex items-center justify-center font-bold",children:p.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:p.name}),e.jsx("div",{className:"text-xs text-gray-400",children:p.position})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>a(p),className:"text-sm bg-gray-600 hover:bg-brand-primary px-3 py-1 rounded-md transition",children:"Details"}),e.jsx("button",{onClick:()=>c(p.id),className:"text-gray-500 hover:text-red-500 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(re,{size:16})})]})]},p.id))})]})},mt=({films:s,onUpload:a,onAnalyze:l,onCancel:c,onViewDetails:t,onDelete:x,onDetectErrors:o})=>{const[i,d]=n.useState(null),m={uploading:"bg-blue-500/20 text-blue-400",pending:"bg-yellow-500/20 text-yellow-400",analyzing:"bg-purple-500/20 text-purple-400",complete:"bg-green-500/20 text-green-400"},u=()=>{i&&(l(i.id),d(null))};return e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 space-y-4 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(ae,{})," Game Film Hub"]}),e.jsxs("button",{onClick:a,className:"bg-brand-primary hover:bg-brand-dark text-white font-bold py-2 px-4 rounded-lg transition flex items-center gap-2",children:[e.jsx(Se,{size:18})," Import Film"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:s.map(r=>e.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold text-white truncate pr-4",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.status==="pending"&&e.jsx("button",{onClick:()=>d(r),className:"bg-gray-600 hover:bg-brand-primary text-sm px-3 py-1 rounded-md transition",children:"Analyze"}),r.status==="complete"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(r),className:"bg-yellow-600 hover:bg-yellow-700 text-sm px-3 py-1 rounded-md transition",children:"Detect Errors"}),e.jsx("button",{onClick:()=>t(r),className:"bg-gray-600 hover:bg-brand-primary text-sm px-3 py-1 rounded-md transition",children:"View Details"})]}),["uploading","analyzing"].includes(r.status)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:`text-xs px-2 py-0.5 rounded-full inline-block capitalize ${m[r.status]}`,children:[r.status,"..."]}),e.jsx("button",{onClick:()=>c(r.id),title:"Cancel",className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-red-500/50 transition",children:e.jsx(O,{size:16})})]}),e.jsx("button",{onClick:()=>x(r.id),className:"text-gray-500 hover:text-red-500 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(re,{size:16})})]})]}),r.status==="uploading"&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400 mb-1",children:[e.jsxs("span",{children:[r.fileSize," MB - ",r.uploadProgress,"%"]}),e.jsxs("span",{children:["ETA: ",r.uploadEta,"s"]})]}),e.jsx("div",{className:"w-full bg-gray-600 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${r.uploadProgress}%`}})})]}),r.status==="analyzing"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex justify-between items-center text-xs text-gray-400 mb-1",children:e.jsx("span",{children:"Analyzing Film..."})}),e.jsx("div",{className:"w-full bg-gray-600 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:"bg-purple-500 h-1.5 rounded-full animate-pulse",style:{width:`${r.analysisProgress}%`}})})]}),r.status==="complete"&&r.summary&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-600/50",children:e.jsxs("p",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-semibold text-brand-accent",children:"Tactical Summary:"})," ",r.summary]})})]},r.id))}),i&&e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center rounded-xl z-10 p-4",children:e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-xl border border-gray-700 max-w-sm text-center animate-[fadeIn_0.2s_ease-in-out]",children:[e.jsx(X,{className:"w-12 h-12 text-brand-primary mx-auto mb-4"}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Confirm AI Analysis"}),e.jsxs("p",{className:"text-gray-400 mb-6",children:['Are you sure you want to analyze "',e.jsx("span",{className:"font-semibold text-white",children:i.title}),'"? This action will use AI to break down the film.']}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>d(null),className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-semibold transition",children:"Cancel"}),e.jsx("button",{onClick:u,className:"px-6 py-2 bg-brand-primary hover:bg-brand-dark rounded-md font-semibold transition",children:"Confirm & Analyze"})]})]})})]})},xt=({onSave:s,closeModal:a})=>{const[l,c]=n.useState(""),[t,x]=n.useState("Offense"),[o,i]=n.useState(""),[d,m]=n.useState(""),[u,r]=n.useState(""),[g,h]=n.useState([]),[p,j]=n.useState([]),[k,v]=n.useState("move"),[R,N]=n.useState(null),[y,S]=n.useState(null),w=n.useRef(null),A=()=>{if(!l||!d){alert("Please provide at least a play name and formation.");return}s({name:l,type:t,subType:o,formation:d,description:u,formationMarkers:g,paths:p})},B=D=>{if(!w.current)return{x:0,y:0};const z=w.current.getBoundingClientRect(),P=Math.min(100,Math.max(0,(D.clientX-z.left)/z.width*100)),G=Math.min(100,Math.max(0,(D.clientY-z.top)/z.height*100));return{x:P,y:G}},C=D=>{const z=B(D),P=g.find(G=>{if(!w.current)return!1;const U=w.current.getBoundingClientRect(),Y=16,F=G.x/100*U.width,je=G.y/100*U.height,ve=z.x/100*U.width,Ne=z.y/100*U.height;return Math.hypot(F-ve,je-Ne)<Y});P&&(k==="move"?(D.preventDefault(),N({id:P.id,offsetX:z.x-P.x,offsetY:z.y-P.y})):k==="draw-path"&&(D.preventDefault(),S({markerId:P.id,points:[{x:P.x,y:P.y},z]})))},$=D=>{const z=B(D);R?h(P=>P.map(G=>G.id===R.id?{...G,x:z.x-R.offsetX,y:z.y-R.offsetY}:G)):y&&S(P=>P?{...P,points:[...P.points,z]}:null)},f=()=>{y&&(j(D=>[...D.filter(P=>P.markerId!==y.markerId),y]),S(null)),N(null)},T=D=>{if(R||y)return;const z=B(D);if(["add-offense","add-defense"].includes(k)){const P=prompt("Enter player label (e.g., QB, WR, C):");if(P&&P.trim()){const G={id:`marker-${Date.now()}`,label:P.trim().toUpperCase(),type:k==="add-offense"?"offense":"defense",...z};h(U=>[...U,G])}}else if(k==="erase"){if(!w.current)return;const P=w.current.getBoundingClientRect(),G=g.find(U=>Math.hypot((U.x-z.x)*(P.width/100),(U.y-z.y)*(P.height/100))<16);G&&(h(g.filter(U=>U.id!==G.id)),j(p.filter(U=>U.markerId!==G.id)))}},M=({icon:D,tool:z,label:P})=>e.jsx("button",{onClick:()=>v(z),title:P,className:`p-2 rounded-lg transition ${k===z?"bg-brand-primary text-white":"bg-gray-600 hover:bg-gray-500"}`,children:e.jsx(D,{size:20})});return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-6xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(rs,{})," Create New Play"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:A,className:"bg-green-600 hover:bg-green-700 py-2 px-4 rounded-lg font-semibold",children:"Save Play"}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]})]}),e.jsxs("div",{className:"flex-grow p-6 grid md:grid-cols-3 gap-6 overflow-hidden",children:[e.jsxs("div",{className:"md:col-span-1 flex flex-col gap-4 overflow-y-auto pr-2",children:[e.jsx("input",{type:"text",value:l,onChange:D=>c(D.target.value),placeholder:"Play Name (e.g., HB Dive)",className:"w-full p-3 bg-gray-700 rounded-lg"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x("Offense"),className:`w-1/2 p-2 rounded-md ${t==="Offense"?"bg-blue-600":"bg-gray-700"}`,children:"Offense"}),e.jsx("button",{onClick:()=>x("Defense"),className:`w-1/2 p-2 rounded-md ${t==="Defense"?"bg-red-600":"bg-gray-700"}`,children:"Defense"})]}),e.jsx("input",{type:"text",value:d,onChange:D=>m(D.target.value),placeholder:"Formation (e.g., Spread)",className:"w-full p-3 bg-gray-700 rounded-lg"}),e.jsx("input",{type:"text",value:o,onChange:D=>i(D.target.value),placeholder:"Play Sub-Type (e.g., Pass, Run)",className:"w-full p-3 bg-gray-700 rounded-lg"}),e.jsx("textarea",{value:u,onChange:D=>r(D.target.value),placeholder:"Description...",rows:5,className:"w-full p-3 bg-gray-700 rounded-lg resize-none"}),e.jsx("div",{className:"text-xs text-gray-400 p-2 bg-gray-900/50 rounded-md",children:"**Draw Path Tool**: Click and drag from a player to draw their route. A new drag will replace the old path for that player."})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3 bg-gray-900/50 p-2 rounded-lg",children:[e.jsx(M,{icon:Is,tool:"move",label:"Move Player"}),e.jsx(M,{icon:Ae,tool:"add-offense",label:"Add Offense Player"}),e.jsx(M,{icon:Ae,tool:"add-defense",label:"Add Defense Player"}),e.jsx(M,{icon:ze,tool:"draw-path",label:"Draw Path"}),e.jsx(M,{icon:Ts,tool:"erase",label:"Erase Player"})]}),e.jsx("div",{ref:w,onMouseDown:C,onMouseMove:$,onMouseUp:f,onMouseLeave:f,onClick:T,className:"flex-grow bg-gray-900 rounded-lg cursor-crosshair",children:e.jsx(ye,{formationMarkers:g,paths:p,activePath:y})})]})]})]})})},Z=({closeModal:s,title:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-lg rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:a}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-400",children:"This feature is not yet implemented."}),e.jsx("button",{onClick:s,className:"mt-6 bg-brand-primary px-6 py-2 rounded-lg",children:"Close"})]})]})}),ut=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Import Plays"}),gt=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Opponent Profile"}),ht=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Drill Visualizer"}),pt=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Play Diagram Generator"}),ft=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"AI Telestrator"}),bt=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Visual Clip Analysis"}),yt=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Recruiting Assistant"}),jt=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"Quick Tactic Generator"}),vt=({closeModal:s})=>e.jsx(Z,{closeModal:s,title:"AI Recruiting Matchmaking"}),Nt=()=>{const[s,a]=n.useState(null),[l,c]=n.useState(null),[t,x]=n.useState(Ee),[o,i]=n.useState(et),[d,m]=n.useState(null),[u,r]=n.useState("AI Assistant"),[g,h]=n.useState("#4f46e5"),[p,j]=n.useState(""),[k,v]=n.useState("All"),[R,N]=n.useState(at),[y,S]=n.useState(Xs),[w,A]=n.useState(!1),[B,C]=n.useState(st),[$,f]=n.useState(tt),T=async()=>{if(!d)return;A(!0);const b=`You are an elite football scouting AI. Based on film analysis of our next opponent, the ${y.opponentName}, generate a detailed scouting report. Provide specific, actionable tendencies.
        
        Structure your response with the following markdown headings:
        ### **Offensive Tendencies**
        (List 3-4 key offensive tendencies including favored formations, common plays on certain downs, and player-specific habits.)
        
        ### **Defensive Tendencies**
        (List 3-4 key defensive tendencies including primary coverage schemes, blitz packages, and individual player weaknesses.)
        
        Make the analysis sound like it came from a professional coach.`;try{const E=await d.models.generateContent({model:"gemini-2.5-pro",contents:b});S(L=>({...L,reportBody:E.text}))}catch(E){S(L=>({...L,reportBody:H(E)}))}finally{A(!1)}},M=b=>{let E="";if(typeof b=="string")try{E=`Film from ${new URL(b).hostname}`}catch{E="Imported Web Film"}else E=b.name;const L=typeof b=="string"?Math.floor(Math.random()*500)+100:Math.round(b.size/1024/1024),V={id:Date.now(),title:E,status:"uploading",uploadProgress:0,fileSize:L,uploadEta:999};N(q=>[V,...q]),a(null);let Q=0;const J=Math.random()*5+2,_=setInterval(()=>{Q+=J;const q=Math.min(Math.round(Q/L*100),100),ee=Math.round((L-Q)/J);N(se=>se.some(W=>W.id===V.id)?se.map(W=>W.id===V.id?q>=100?(clearInterval(_),{...W,uploadProgress:100,status:"pending",uploadEta:0}):{...W,uploadProgress:q,uploadEta:ee>0?ee:0}:W):(clearInterval(_),se))},1e3)},D=b=>{window.confirm("Are you sure you want to permanently delete this film? This action cannot be undone.")&&N(E=>E.filter(L=>L.id!==b))},z=b=>{N(E=>E.filter(L=>L.id!==b))},P=b=>{c(b),a("detailedAnalysis")},G=async b=>{const E=R.find(_=>_.id===b);if(!E||(N(_=>_.map(q=>q.id===b?{...q,status:"analyzing",analysisProgress:0}:q)),await new Promise(_=>{const q=setInterval(()=>{N(ee=>{const se=ee.find(W=>W.id===b);if(!se||se.status!=="analyzing")return clearInterval(q),_(!0),ee;const we=Math.min((se.analysisProgress??0)+20,100);return we>=100&&(clearInterval(q),_(!1)),ee.map(W=>W.id===b?{...W,analysisProgress:we}:W)})},500)})))return;let Q=`AI analysis complete for ${E.title}.`,J="No detailed analysis available.";if(d)try{const _=`You are an expert AI football strategist providing a direct, tactical analysis of a game film titled "${E.title}". 
                Your audience is a head coach who needs actionable insights, not fluff.
                Provide a concise, hard-hitting summary (2-3 sentences). 
                Focus on:
                1.  The single most exploitable weakness we showed.
                2.  The most effective offensive concept we ran.
                3.  A critical adjustment needed for the next game.
                Be direct. Example: "Our offensive line's pass protection against their 3-man rush was a liability. The 'HB Screen' play was highly effective, averaging 9.5 yards. We must adjust our protection schemes immediately."`;Q=(await d.models.generateContent({model:"gemini-2.5-pro",contents:_})).text;const ee=`You are an expert AI football analyst creating a detailed breakdown of the game film "${E.title}".
                Provide a structured report using markdown for a head coach. Cover the following sections:
                
                ### **Offensive Performance**
                - **Strengths:** (List 2-3 specific strengths with data, e.g., "High success rate on 1st down runs (5.8 YPC).")
                - **Weaknesses:** (List 2-3 specific weaknesses, e.g., "Struggled in red zone, converting only 1 of 4 attempts.")
                
                ### **Defensive Performance**
                - **Strengths:** (e.g., "Excellent containment of mobile QBs, allowing only 15 rushing yards.")
                - **Weaknesses:** (e.g., "Vulnerable to play-action passes, gave up 3 explosive plays >20 yards.")
                
                ### **Key Player Notes**
                - **Standout Performer:** (Name a position or player # and why.)
                - **Needs Improvement:** (Name a position or player # and why.)
                
                ### **Actionable Insights**
                - (Provide two concrete, tactical adjustments the team should implement in practice this week based on this film.)`;J=(await d.models.generateContent({model:"gemini-2.5-pro",contents:ee})).text}catch(_){const q=H(_);Q=q,J=q}N(_=>_.map(q=>q.id===b?{...q,analysisProgress:100,status:"complete",summary:Q,detailedAnalysis:J}:q))},U=async b=>{if(!(!d||!b.detailedAnalysis)){c({...b,loadingErrors:!0,detectedErrors:[]}),a("detailedAnalysis");try{const E=`You are an elite football analyst tasked with identifying specific missed assignments and execution errors from a detailed film analysis.
            Given the following detailed analysis for the game "${b.title}":
            ---
            ${b.detailedAnalysis}
            ---
            Extract specific errors, categorize them (e.g., 'Offensive Line', 'DB Coverage', 'QB Reads', 'Receiver Route'), provide a brief description, and suggest a simple drill name to correct it.
            Return the output as a JSON array of objects, where each object has 'category', 'description', 'suggestedDrill', and 'mockClipLink' (a placeholder YouTube URL).`,L=await d.models.generateContent({model:"gemini-2.5-pro",contents:E,config:{responseMimeType:"application/json",responseSchema:{type:I.ARRAY,items:{type:I.OBJECT,properties:{category:{type:I.STRING},description:{type:I.STRING},suggestedDrill:{type:I.STRING},mockClipLink:{type:I.STRING,format:"uri"}},required:["category","description","suggestedDrill","mockClipLink"]}}}}),V=JSON.parse(L.text);N(Q=>Q.map(J=>J.id===b.id?{...J,errorDetection:V}:J)),c(Q=>({...Q,detectedErrors:V,loadingErrors:!1}))}catch(E){console.error("Error detecting errors:",E),c(L=>({...L,errorDetectionError:H(E),loadingErrors:!1}))}}},Y=(b,E=null)=>{c(E),a(b)},F=()=>{a(null),c(null)};n.useEffect(()=>{Oe.API_KEY&&m(new Te({apiKey:Oe.API_KEY}))},[]),n.useEffect(()=>{document.documentElement.style.setProperty("--color-brand-primary",g),document.documentElement.style.setProperty("--color-brand-dark",rt(g,10))},[g]);const je=b=>{const E={id:Date.now(),name:b.name,position:b.position,age:b.age,height:b.height,parentsName:b.parentsName,phone:b.phone,notes:b.notes,academicInfo:b.academicInfo,avatar:b.name.split(" ").map(L=>L[0]).join("").toUpperCase(),stats:[{name:"New Player",value:"N/A",trend:""}],radarData:[{subject:"Stat 1",value:50,avg:50,fullMark:100},{subject:"Stat 2",value:50,avg:50,fullMark:100},{subject:"Stat 3",value:50,avg:50,fullMark:100},{subject:"Stat 4",value:50,avg:50,fullMark:100},{subject:"Stat 5",value:50,avg:50,fullMark:100}],mainMetricName:"N/A"};x(L=>[E,...L]),F()},ve=b=>{window.confirm("Are you sure you want to delete this player from the roster?")&&x(E=>E.filter(L=>L.id!==b))},Ne=(b,E)=>{const L={id:Date.now(),name:b,position:E,avatar:b.split(" ").map(V=>V[0]).join("").toUpperCase(),notes:"",clips:[]};i(V=>[L,...V])},is=b=>{i(E=>E.filter(L=>L.id!==b))},os=b=>{const E={...b,id:Date.now()};C(L=>[E,...L]),F()},ds=b=>{const E=b.map(L=>({...L,id:Date.now()+Math.random()}));C(L=>[...L,...E]),alert(`${b.length} plays imported successfully!`),F()},cs=b=>{i(E=>E.map(L=>L.id===b.id?b:L))},ms=t.filter(b=>b.name.toLowerCase().includes(p.toLowerCase())&&(k==="All"||b.position===k)),xs=["All",...new Set(t.map(b=>b.position))],us=()=>{if(!d&&s&&s!=="settings"&&s!=="addPlayer"&&s!=="playbook"&&s!=="importPlays"&&s!=="comparePlayers"&&s!=="uploadFilm"&&s!=="createPlayerAccounts"&&s!=="manageTraining")return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"API Key Not Found"}),e.jsx("p",{className:"text-gray-300",children:"Please set your API_KEY environment variable."}),e.jsx("button",{onClick:F,className:"mt-6 bg-brand-primary px-6 py-2 rounded-lg",children:"Close"})]})});switch(s){case"live":return e.jsx(Mt,{ai:d,closeModal:F});case"enhancedLiveSideline":return e.jsx(Dt,{ai:d,closeModal:F,players:t});case"image":return e.jsx(Rt,{ai:d,closeModal:F});case"complex":return e.jsx(zt,{ai:d,closeModal:F});case"grounded":return e.jsx(Et,{ai:d,closeModal:F});case"addPlayer":return e.jsx(Tt,{onAdd:je,closeModal:F});case"playbook":return e.jsx(Pt,{plays:B,setPlays:C,openPlayCreator:()=>Y("playCreator"),openImporter:()=>Y("importPlays"),closeModal:F});case"playCreator":return e.jsx(xt,{onSave:os,closeModal:()=>Y("playbook")});case"importPlays":return e.jsx(ut,{onImport:ds,closeModal:F});case"comparePlayers":return e.jsx(At,{players:t,closeModal:F});case"uploadFilm":return e.jsx(St,{onUpload:M,closeModal:F});case"createPlayerAccounts":return e.jsx(Ct,{closeModal:F});case"detailedAnalysis":return l&&e.jsx(kt,{film:l,ai:d,closeModal:F,onDetectErrors:U});case"opponentProfile":return l&&e.jsx(gt,{player:l,allFilms:R,ai:d,onUpdate:cs,closeModal:F});case"settings":return e.jsx(It,{aiName:u,onAiNameChange:r,teamColor:g,onTeamColorChange:h,closeModal:F});case"drillVisualizer":return e.jsx(ht,{ai:d,closeModal:F});case"playDiagramGenerator":return e.jsx(pt,{ai:d,closeModal:F});case"telestrator":return e.jsx(ft,{ai:d,closeModal:F});case"visualClipAnalysis":return e.jsx(bt,{ai:d,closeModal:F});case"recruitingAssistant":return e.jsx(yt,{ai:d,closeModal:F});case"quickTactic":return e.jsx(jt,{ai:d,closeModal:F});case"manageTraining":return e.jsx(wt,{exercises:$,setExercises:f,closeModal:F});case"recruitingMatchmaking":return e.jsx(vt,{ai:d,closeModal:F,players:t});default:return null}};return e.jsxs("div",{className:"bg-gray-900 text-white min-h-screen",children:[e.jsx("nav",{className:"bg-gray-800 border-b-4 border-brand-primary shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"ðŸˆ GRIDIRON INTEL"}),e.jsx("div",{className:"text-gray-400",children:"|"}),e.jsx("div",{className:"text-gray-300",children:"Coach Dashboard"})]})})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(oe,{title:"SEASON RECORD",value:"8-2",trend:"+3 from last season",color:"text-green-400"}),e.jsx(oe,{title:"PLAYS ANALYZED",value:"642",trend:"95% AI accuracy",color:"text-blue-400"}),e.jsx(oe,{title:"ACTIVE PLAYERS",value:String(t.length),trend:"Roster count",color:"text-purple-400"}),e.jsx(oe,{title:"FILMS ANALYZED",value:String(R.filter(b=>b.status==="complete").length),trend:`${R.filter(b=>b.status!=="complete").length} pending`,color:"text-yellow-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(mt,{films:R,onUpload:()=>Y("uploadFilm"),onAnalyze:G,onCancel:z,onViewDetails:P,onDelete:D,onDetectErrors:U}),e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(We,{})," AI Scouting Report: ",y.opponentName]}),e.jsx("button",{onClick:T,disabled:w||!d,className:"bg-brand-primary hover:bg-brand-dark text-white font-bold py-2 px-4 rounded-lg transition flex items-center gap-2 disabled:bg-gray-600 disabled:cursor-not-allowed",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{size:18})," Regenerate"]})})]}),e.jsx("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:w?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/3 mt-4"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6"})]}):e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed",children:y.reportBody})})]}),e.jsx(it,{})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 space-y-3",children:[e.jsx("h2",{className:"text-xl font-bold text-white border-b border-gray-700 pb-3 mb-3",children:"Core AI Tools"}),e.jsxs("button",{onClick:()=>Y("playbook"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-green-600 rounded-lg transition group",children:[e.jsx(xe,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Manage Playbook"})]}),e.jsxs("button",{onClick:()=>Y("manageTraining"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-green-600 rounded-lg transition group",children:[e.jsx(ue,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Manage Training Plan"})]}),e.jsxs("button",{onClick:()=>Y("enhancedLiveSideline"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-red-600 rounded-lg transition group",children:[e.jsx(ie,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Live Sideline Assistant"})]}),e.jsxs("button",{onClick:()=>Y("complex"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-purple-600 rounded-lg transition group",children:[e.jsx(X,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Deep Strategy Analysis"})]}),e.jsxs("button",{onClick:()=>Y("settings"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition group",children:[e.jsx(Ke,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Team Settings"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6 space-y-3",children:[e.jsx("h2",{className:"text-xl font-bold text-white border-b border-gray-700 pb-3 mb-3",children:"Advanced AI Tools"}),e.jsxs("button",{onClick:()=>Y("drillVisualizer"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-indigo-600 rounded-lg transition group",children:[e.jsx(gs,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Drill Visualizer (Veo)"})]}),e.jsxs("button",{onClick:()=>Y("playDiagramGenerator"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-teal-600 rounded-lg transition group",children:[e.jsx(hs,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Play Diagram Generator"})]}),e.jsxs("button",{onClick:()=>Y("telestrator"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-pink-600 rounded-lg transition group",children:[e.jsx(ps,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"AI Telestrator"})]}),e.jsxs("button",{onClick:()=>Y("visualClipAnalysis"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-blue-600 rounded-lg transition group",children:[e.jsx(ae,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Visual Clip Analysis"})]}),e.jsxs("button",{onClick:()=>Y("quickTactic"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-orange-600 rounded-lg transition group",children:[e.jsx(fs,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Quick Tactic Generator"})]}),e.jsxs("button",{onClick:()=>Y("recruitingAssistant"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-yellow-600 rounded-lg transition group",children:[e.jsx(bs,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"Recruiting Assistant"})]}),e.jsxs("button",{onClick:()=>Y("recruitingMatchmaking"),className:"w-full flex items-center gap-3 p-4 bg-gray-700 hover:bg-green-600 rounded-lg transition group",children:[e.jsx(ys,{className:"text-gray-400 group-hover:text-white"})," ",e.jsx("span",{className:"text-gray-300 group-hover:text-white",children:"AI Recruiting Matchmaking"})]})]}),e.jsx(nt,{ai:d}),e.jsx(lt,{ai:d}),e.jsx(dt,{}),e.jsx(ot,{players:ms,onAddPlayer:()=>Y("addPlayer"),onComparePlayers:()=>Y("comparePlayers"),onCreateAccounts:()=>Y("createPlayerAccounts"),onDeletePlayer:ve,searchQuery:p,setSearchQuery:j,positionFilter:k,setPositionFilter:v,positions:xs}),e.jsx(ct,{players:o,onViewDetails:b=>Y("opponentProfile",b),onAddOpponent:Ne,onDeleteOpponent:is})]})]}),us(),e.jsx(Lt,{ai:d,aiName:u,gameFilms:R.filter(b=>b.status==="complete")})]})]})},wt=({exercises:s,setExercises:a,closeModal:l})=>{const[c,t]=n.useState({name:"",description:"",sets:"",reps:""}),x=()=>{if(!c.name||!c.sets||!c.reps){alert("Please fill out at least Name, Sets, and Reps.");return}const d={id:Date.now(),...c};a([d,...s]),t({name:"",description:"",sets:"",reps:""})},o=d=>{a(s.filter(m=>m.id!==d))},i="w-full p-2 bg-gray-600 rounded-lg border border-gray-500";return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ue,{})," Manage Training Plan"]}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-grow grid md:grid-cols-2 gap-6 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add New Exercise"}),e.jsx("input",{type:"text",placeholder:"Exercise Name",value:c.name,onChange:d=>t(m=>({...m,name:d.target.value})),className:i}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Sets",value:c.sets,onChange:d=>t(m=>({...m,sets:d.target.value})),className:i}),e.jsx("input",{type:"text",placeholder:"Reps",value:c.reps,onChange:d=>t(m=>({...m,reps:d.target.value})),className:i})]}),e.jsx("textarea",{placeholder:"Description or coaching points...",value:c.description,onChange:d=>t(m=>({...m,description:d.target.value})),rows:4,className:`${i} resize-none`}),e.jsx("button",{onClick:x,className:"w-full py-3 bg-brand-primary hover:bg-brand-dark rounded-lg font-bold",children:"Add to Plan"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Current Plan (",s.length,")"]}),e.jsx("div",{className:"flex-grow bg-gray-900/50 rounded-lg p-3 space-y-2 overflow-y-auto",children:s.map(d=>e.jsx("div",{className:"bg-gray-700 p-3 rounded-lg group",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white",children:d.name}),e.jsxs("p",{className:"text-sm text-brand-accent",children:[d.sets," sets of ",d.reps]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.description})]}),e.jsx("button",{onClick:()=>o(d.id),className:"p-1 text-gray-500 hover:text-red-500 flex-shrink-0 ml-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(re,{size:16})})]})},d.id))})]})]})]})})},kt=({film:s,ai:a,closeModal:l,onDetectErrors:c})=>{const[t,x]=n.useState("analysis"),o=async i=>{var d,m,u,r,g,h;if(i)try{const j=(h=(g=(r=(u=(m=(d=(await a.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:i}]}],config:{responseModalities:[le.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:d[0])==null?void 0:m.content)==null?void 0:u.parts)==null?void 0:r[0])==null?void 0:g.inlineData)==null?void 0:h.data;if(j){const k=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),v=await be(fe(j),k,24e3,1),R=k.createBufferSource();R.buffer=v,R.connect(k.destination),R.start()}}catch(p){console.error("TTS Error:",p),alert("Failed to play audio. Error: "+H(p))}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-3xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(X,{})," Detailed AI Breakdown"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.detailedAnalysis&&t==="analysis"&&e.jsx("button",{onClick:()=>o(s.detailedAnalysis||""),className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(Pe,{size:20})}),s.errorDetection&&t==="errors"&&s.errorDetection.length>0&&e.jsx("button",{onClick:()=>{var i;return o(((i=s.errorDetection)==null?void 0:i.map(d=>d.description).join(". "))||"")},className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(Pe,{size:20})}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]})]}),e.jsx("div",{className:"p-4 flex-shrink-0",children:e.jsxs("div",{className:"flex bg-gray-900/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("analysis"),className:`flex-grow py-2 rounded-md font-semibold ${t==="analysis"?"bg-brand-primary":"hover:bg-gray-700"}`,children:"Full Analysis"}),e.jsx("button",{onClick:()=>{x("errors"),s.errorDetection||c(s)},className:`flex-grow py-2 rounded-md font-semibold ${t==="errors"?"bg-brand-primary":"hover:bg-gray-700"}`,children:"Detected Errors"})]})}),e.jsxs("div",{className:"p-6 flex-grow overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-brand-accent mb-4",children:s.title}),t==="analysis"&&e.jsx("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed",children:s.detailedAnalysis})}),t==="errors"&&e.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-lg min-h-[200px] relative",children:[!s.errorDetection&&!s.errorDetectionError&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-brand-accent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AI is scanning film for missed assignments and execution errors..."})]}),s.errorDetectionError&&e.jsx("div",{className:"bg-red-500/20 text-red-300 text-sm p-3 rounded-lg",children:s.errorDetectionError}),s.errorDetection&&s.errorDetection.length>0&&e.jsx("ul",{className:"space-y-4",children:s.errorDetection.map((i,d)=>e.jsxs("li",{className:"bg-gray-700 p-3 rounded-lg border border-gray-600",children:[e.jsxs("p",{className:"font-bold text-red-400 mb-1 flex items-center gap-2",children:[e.jsx(Qe,{size:18})," ",i.category]}),e.jsx("p",{className:"text-gray-300",children:i.description}),e.jsxs("p",{className:"text-sm text-brand-accent mt-2",children:["Corrective Drill: ",i.suggestedDrill]}),e.jsxs("a",{href:i.mockClipLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline text-sm mt-1 flex items-center gap-1",children:[e.jsx(ae,{size:14})," View Clip"]})]},d))}),s.errorDetection&&s.errorDetection.length===0&&e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No specific errors detected in this film. Good job!"})]})]})]})})},Ct=({closeModal:s})=>{const[a,l]=n.useState(""),[c,t]=n.useState(!1),x=o=>{o.preventDefault(),a.trim()&&(console.log("Simulating account creation for:",a),t(!0))};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-lg rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ce,{})," Create Player Accounts"]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),c?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ve,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Invites Sent!"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Players will receive an email to set up their accounts and join the team portal."}),e.jsx("button",{onClick:s,className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold",children:"Done"})]}):e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Player Information"}),e.jsx("textarea",{value:a,onChange:o=>l(o.target.value),rows:8,placeholder:`Paste player list here. e.g.
John Doe, QB, john.d@email.com
Mike Davis, WR, mike.d@email.com`,className:"w-full p-3 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary resize-none"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter one player per line: Name, Position, Email"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold disabled:bg-gray-600",disabled:!a.trim(),children:"Send Account Invites"})})]})]})})},St=({onUpload:s,closeModal:a})=>{const[l,c]=n.useState("file"),[t,x]=n.useState(""),[o,i]=n.useState(""),d=n.useRef(null),m=r=>{r.target.files&&r.target.files[0]&&s(r.target.files[0])},u=r=>{if(r.preventDefault(),i(""),!!t.trim())try{new URL(t.trim()),s(t.trim())}catch{i("Invalid URL. Please enter a valid web address.")}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-lg rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Se,{})," Import Game Film"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-1 bg-gray-900/50 m-4 rounded-lg flex",children:[e.jsxs("button",{onClick:()=>c("file"),className:`w-1/2 p-2 rounded-md font-semibold transition ${l==="file"?"bg-brand-primary":"hover:bg-gray-700"}`,children:[e.jsx(es,{className:"inline-block mr-2",size:18}),"Upload File"]}),e.jsxs("button",{onClick:()=>c("url"),className:`w-1/2 p-2 rounded-md font-semibold transition ${l==="url"?"bg-brand-primary":"hover:bg-gray-700"}`,children:[e.jsx(Ps,{className:"inline-block mr-2",size:18}),"Import from URL"]})]}),e.jsx("div",{className:"p-6 pt-2",children:l==="file"?e.jsxs("div",{children:[e.jsx("input",{type:"file",ref:d,onChange:m,className:"hidden",accept:"video/mp4,video/quicktime"}),e.jsxs("button",{onClick:()=>{var r;return(r=d.current)==null?void 0:r.click()},className:"w-full flex flex-col items-center justify-center p-12 border-2 border-dashed border-gray-600 rounded-lg hover:bg-gray-700/50 hover:border-brand-primary transition",children:[e.jsx(Se,{size:48,className:"text-gray-500 mb-2"}),e.jsx("span",{className:"font-semibold text-lg",children:"Click to upload"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"MP4, MOV, etc. (Max 2GB)"})]})]}):e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Film URL"}),e.jsx("input",{type:"url",value:t,onChange:r=>x(r.target.value),placeholder:"https://www.hudl.com/...",className:"w-full p-3 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary"}),o&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:o}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supports Hudl, YouTube, Dropbox, etc."})]}),e.jsx("button",{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold disabled:bg-gray-600",disabled:!t.trim(),children:"Import and Process Film"})]})})]})})},At=({players:s,closeModal:a})=>{const[l,c]=n.useState(""),[t,x]=n.useState(""),o=s.find(u=>u.id===parseInt(l)),i=s.find(u=>u.id===parseInt(t)),d=o==null?void 0:o.radarData.map((u,r)=>{var g;return{subject:u.subject,[o.name]:u.value,[(i==null?void 0:i.name)||"Player 2"]:(g=i==null?void 0:i.radarData[r])==null?void 0:g.value,fullMark:u.fullMark}}),m=u=>u?e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-brand-primary rounded-full flex items-center justify-center font-bold text-3xl",children:u.avatar}),e.jsx("h3",{className:"text-2xl font-bold",children:u.name}),e.jsx("p",{className:"text-lg text-brand-accent",children:u.position}),e.jsx("div",{className:"w-full bg-gray-900/50 p-3 rounded-lg space-y-2",children:u.stats.map(r=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:r.name}),e.jsx("span",{className:"font-semibold",children:r.value})]},r.name))})]}):e.jsx("div",{className:"text-center text-gray-500",children:"Select a player"});return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-6xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ze,{})," Player Comparison"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 flex flex-col gap-6 flex-grow overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("select",{value:l,onChange:u=>c(u.target.value),className:"w-full p-3 bg-gray-700 rounded-lg border border-gray-600",children:[e.jsx("option",{value:"",children:"-- Select Player 1 --"}),s.map(u=>e.jsxs("option",{value:u.id,children:[u.name," (",u.position,")"]},u.id))]}),e.jsxs("select",{value:t,onChange:u=>x(u.target.value),className:"w-full p-3 bg-gray-700 rounded-lg border border-gray-600",children:[e.jsx("option",{value:"",children:"-- Select Player 2 --"}),s.map(u=>e.jsxs("option",{value:u.id,children:[u.name," (",u.position,")"]},u.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 flex-grow",children:[m(o),m(i)]}),o&&i&&e.jsx("div",{className:"h-80 -mt-8",children:e.jsx(Me,{width:"100%",height:"100%",children:e.jsxs(ss,{cx:"50%",cy:"50%",outerRadius:"80%",data:d,children:[e.jsx(ts,{gridType:"circle",stroke:"rgba(255,255,255,0.2)"}),e.jsx(as,{dataKey:"subject",tick:{fill:"#cbd5e1",fontSize:12}}),e.jsx(De,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151"}}),e.jsx(Re,{}),e.jsx(me,{name:o.name,dataKey:o.name,stroke:"var(--color-brand-accent)",fill:"var(--color-brand-accent)",fillOpacity:.6}),e.jsx(me,{name:i.name,dataKey:i.name,stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6})]})})})]})]})})},Pt=({plays:s,setPlays:a,openPlayCreator:l,openImporter:c,closeModal:t})=>{const[x,o]=n.useState("All"),i=m=>{window.confirm("Are you sure you want to delete this play?")&&a(s.filter(u=>u.id!==m))},d=s.filter(m=>x==="All"||m.type===x);return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(xe,{})," Manage Playbook"]}),e.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-grow overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>o("All"),className:`px-3 py-1 text-sm rounded-md ${x==="All"?"bg-brand-primary":""}`,children:"All"}),e.jsx("button",{onClick:()=>o("Offense"),className:`px-3 py-1 text-sm rounded-md ${x==="Offense"?"bg-brand-primary":""}`,children:"Offense"}),e.jsx("button",{onClick:()=>o("Defense"),className:`px-3 py-1 text-sm rounded-md ${x==="Defense"?"bg-brand-primary":""}`,children:"Defense"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:c,className:"bg-gray-600 hover:bg-gray-500 py-2 px-4 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(es,{size:18})," Import Plays"]}),e.jsxs("button",{onClick:l,className:"bg-green-600 hover:bg-green-700 py-2 px-4 rounded-lg font-semibold flex items-center gap-2",children:[e.jsx(rs,{size:18})," Create New Play"]})]})]}),e.jsx("div",{className:"flex-grow bg-gray-900/50 rounded-lg p-3 space-y-2 overflow-y-auto",children:d.map(m=>e.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-white",children:[m.name," ",e.jsx("span",{className:`text-xs ml-2 px-2 py-0.5 rounded-full ${m.type==="Offense"?"bg-blue-500/50":"bg-red-500/50"}`,children:m.type})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[m.formation," - ",m.subType]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:m.description})]}),e.jsx("button",{onClick:()=>i(m.id),className:"p-1 text-gray-400 hover:text-red-500 flex-shrink-0 ml-4",children:e.jsx(re,{size:16})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(ye,{formationMarkers:m.formationMarkers,paths:m.paths})})]},m.id))})]})]})})},It=({aiName:s,onAiNameChange:a,teamColor:l,onTeamColorChange:c,closeModal:t})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-md rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ke,{})," Team Settings"]}),e.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aiNameInput",className:"block text-sm font-medium text-gray-400 mb-2",children:"Customize AI Name"}),e.jsx("input",{id:"aiNameInput",type:"text",value:s,onChange:x=>a(x.target.value),className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teamColorInput",className:"block text-sm font-medium text-gray-400 mb-2",children:"Primary Team Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{id:"teamColorInput",type:"color",value:l,onChange:x=>c(x.target.value),className:"p-1 h-10 w-10 block bg-gray-700 border border-gray-600 cursor-pointer rounded-lg"}),e.jsx("div",{className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600",children:l})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:t,className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold",children:"Close"})})]})]})}),Tt=({onAdd:s,closeModal:a})=>{const[l,c]=n.useState({name:"",position:"",age:"",height:"",parentsName:"",phone:"",notes:"",academicInfo:""}),t=d=>{const{name:m,value:u}=d.target;c(r=>({...r,[m]:u}))},x=d=>{d.preventDefault(),l.name&&l.position&&s({...l,age:l.age?parseInt(l.age):void 0})},o="w-full p-2 bg-gray-700 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary",i="block text-sm font-medium text-gray-400 mb-1";return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-lg rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ne,{})," Add New Player"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:i,children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:l.name,onChange:t,required:!0,className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"position",className:i,children:"Position"}),e.jsx("input",{id:"position",name:"position",type:"text",value:l.position,onChange:t,required:!0,className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"age",className:i,children:"Age"}),e.jsx("input",{id:"age",name:"age",type:"number",value:l.age,onChange:t,className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:i,children:`Height (e.g., 6'1")`}),e.jsx("input",{id:"height",name:"height",type:"text",value:l.height,onChange:t,className:o})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"parentsName",className:i,children:"Parent/Guardian Name"}),e.jsx("input",{id:"parentsName",name:"parentsName",type:"text",value:l.parentsName,onChange:t,className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:i,children:"Phone Number"}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:l.phone,onChange:t,className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"academicInfo",className:i,children:"Academic Info (e.g., GPA, interests)"}),e.jsx("input",{id:"academicInfo",name:"academicInfo",type:"text",value:l.academicInfo,onChange:t,className:o})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:i,children:"Coach's Notes (Private)"}),e.jsx("textarea",{id:"notes",name:"notes",value:l.notes,onChange:t,rows:3,className:`${o} resize-none`})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold",children:"Add Player to Roster"})})]})]})})},Mt=({ai:s,closeModal:a})=>{const[l,c]=n.useState(!1),[t,x]=n.useState([]),o=n.useRef(null),i=n.useRef(null),d=n.useRef(null),m=n.useCallback(()=>{o.current&&(o.current.then(r=>r.close()),o.current=null),i.current&&i.current.state!=="closed"&&i.current.close(),d.current&&d.current.state!=="closed"&&d.current.close(),c(!1)},[]),u=n.useCallback(async()=>{c(!0),x([]);const r=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});i.current=r;let g=0;const h=s.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{responseModalities:[le.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Zephyr"}}},inputAudioTranscription:{},outputAudioTranscription:{},systemInstruction:"You are a helpful and concise high school football coaching assistant named Grid. Keep your answers brief and to the point."},callbacks:{onopen:async()=>{const p=await navigator.mediaDevices.getUserMedia({audio:!0}),j=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});d.current=j;const k=j.createMediaStreamSource(p),v=j.createScriptProcessor(4096,1,1);k.connect(v),v.connect(j.destination),v.onaudioprocess=R=>{const N=R.inputBuffer.getChannelData(0),y=new Int16Array(N.length);for(let w=0;w<N.length;w++)y[w]=N[w]*32768;const S={data:pe(new Uint8Array(y.buffer)),mimeType:"audio/pcm;rate=16000"};h.then(w=>w.sendRealtimeInput({media:S}))}},onmessage:async p=>{var k,v,R,N,y,S;(k=p.serverContent)!=null&&k.inputTranscription&&x(w=>{const A=w[w.length-1];return A&&!A.model?[...w.slice(0,-1),{...A,user:A.user+p.serverContent.inputTranscription.text}]:[...w,{user:p.serverContent.inputTranscription.text,model:""}]}),(v=p.serverContent)!=null&&v.outputTranscription&&x(w=>{const A=w[w.length-1];return[...w.slice(0,-1),{...A,model:A.model+p.serverContent.outputTranscription.text}]});const j=(S=(y=(N=(R=p.serverContent)==null?void 0:R.modelTurn)==null?void 0:N.parts[0])==null?void 0:y.inlineData)==null?void 0:S.data;if(j&&i.current){g=Math.max(g,i.current.currentTime);const w=await be(fe(j),i.current,24e3,1),A=i.current.createBufferSource();A.buffer=w,A.connect(i.current.destination),A.start(g),g+=w.duration}},onerror:p=>{console.error("Live session error:",p),alert("Live session error: "+H(p)),m()},onclose:()=>c(!1)}});o.current=h},[s,m]);return n.useEffect(()=>()=>{m()},[m]),e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-2xl h-[80vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ie,{})," Live AI Conversation"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsx("div",{className:"flex-grow p-4 space-y-4 overflow-y-auto",children:t.map((r,g)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-right text-gray-300",children:r.user}),r.model&&e.jsx("p",{className:"text-left text-brand-accent font-semibold",children:r.model})]},g))}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsx("button",{onClick:l?m:u,className:`w-full py-3 rounded-lg text-lg font-bold transition ${l?"bg-red-600 hover:bg-red-700":"bg-brand-primary hover:bg-brand-dark"}`,children:l?"Stop Conversation":"Start Conversation"})})]})})},Dt=({ai:s,closeModal:a,players:l})=>{const[c,t]=n.useState(!1),[x,o]=n.useState([]),[i,d]=n.useState(!1),[m,u]=n.useState({down:1,distance:10,fieldPosition:25,timeRemaining:"12:00",score:"0-0"}),r=n.useRef(null),g=n.useRef(null),h=n.useRef(null),p=n.useRef(null);let j=0;const k=n.useCallback(N=>(N=N.toLowerCase(),N.includes("tendency")&&N.includes("3rd")&&N.includes("short")?"On 3rd and short, opponent's most likely play is an inside zone run (65% confidence).":N.includes("qb")&&N.includes("deep passes")?l.find(S=>S.position==="QB"&&S.name.includes("J. Williams"))?"J. Williams has completed 3 of 5 deep passes for 85 yards today.":"QB stats not available for deep passes.":N.includes("play call")&&N.includes("defensive coverage")?"Given their current offensive formation, a Cover 2 zone would disrupt their quick passing game.":"I can't find specific data for that query right now, Coach. Please ask something else."),[l]),v=n.useCallback(()=>{r.current&&(r.current.then(N=>N.close()),r.current=null),g.current&&g.current.state!=="closed"&&g.current.close(),h.current&&h.current.state!=="closed"&&h.current.close(),t(!1),o([]),j=0},[]),R=n.useCallback(async()=>{t(!0),o([]),j=0;const N=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});g.current=N;const y=async A=>{var $,f,T,M,D,z;let B="";if(A.toolCall&&A.toolCall.functionCalls){for(const P of A.toolCall.functionCalls)if(P.name==="queryGameData"){const G=k(P.args.query);B=G,($=r.current)==null||$.then(U=>{U.sendToolResponse({functionResponses:{id:P.id,name:P.name,response:{result:G}}})})}}(f=A.serverContent)!=null&&f.outputTranscription&&(B+=(B?" ":"")+A.serverContent.outputTranscription.text),B&&o(P=>{const G=P[P.length-1];return G&&G.ai===""?[...P.slice(0,-1),{...G,ai:G.ai+B}]:[...P,{user:"",ai:B}]});const C=(z=(D=(M=(T=A.serverContent)==null?void 0:T.modelTurn)==null?void 0:M.parts[0])==null?void 0:D.inlineData)==null?void 0:z.data;if(C&&g.current){j=Math.max(j,g.current.currentTime);const P=await be(fe(C),g.current,24e3,1),G=g.current.createBufferSource();G.buffer=P,G.connect(g.current.destination),G.start(j),j+=P.duration}},S={name:"queryGameData",parameters:{type:I.OBJECT,description:"Queries live game data or player statistics based on a natural language query.",properties:{query:{type:I.STRING,description:'The natural language query to extract game data. E.g., "opponent tendency on 3rd down" or "QB completion percentage".'}},required:["query"]}},w=s.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{responseModalities:[le.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Fenrir"}}},inputAudioTranscription:{},outputAudioTranscription:{},systemInstruction:`You are Grid, a highly specialized real-time high school football sideline assistant AI. Provide concise, actionable information to the coach. Use the 'queryGameData' tool for any data-related questions. If proactive alerts are enabled, provide critical strategic insights based on the mocked game situation: Down ${m.down}, Distance ${m.distance}, Field Position Own ${m.fieldPosition}, Time ${m.timeRemaining}, Score ${m.score}. Keep responses brief and to the point.`,tools:[{functionDeclarations:[S]}]},callbacks:{onopen:async()=>{const A=await navigator.mediaDevices.getUserMedia({audio:!0}),B=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});h.current=B;const C=B.createMediaStreamSource(A),$=B.createScriptProcessor(4096,1,1);C.connect($),$.connect(B.destination),$.onaudioprocess=f=>{const T=f.inputBuffer.getChannelData(0),M=new Int16Array(T.length);for(let z=0;z<T.length;z++)M[z]=T[z]*32768;const D={data:pe(new Uint8Array(M.buffer)),mimeType:"audio/pcm;rate=16000"};w.then(z=>z.sendRealtimeInput({media:D}))},i&&w.then(f=>{f.sendRealtimeInput({text:`Proactive alert: Based on previous opponent tendencies and current game state (Down ${m.down}, Distance ${m.distance}, Field Position Own ${m.fieldPosition}), they often run a play-action pass here.`})})},onmessage:y,onerror:A=>{console.error("Live session error:",A),alert("Live session error: "+H(A)),v()},onclose:()=>t(!1)}});r.current=w},[s,v,i,m,k]);return n.useEffect(()=>{var N;(N=p.current)==null||N.scrollIntoView({behavior:"smooth"})},[x]),n.useEffect(()=>()=>{v()},[v]),n.useEffect(()=>{const N=setInterval(()=>{u(y=>({...y,down:Math.floor(Math.random()*4)+1,distance:Math.floor(Math.random()*10)+1,fieldPosition:Math.floor(Math.random()*90)+1,timeRemaining:`${Math.floor(Math.random()*12)}:${Math.floor(Math.random()*60).toString().padStart(2,"0")}`,score:`${Math.floor(Math.random()*30)}-${Math.floor(Math.random()*30)}`}))},15e3);return()=>clearInterval(N)},[]),e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ie,{})," Live Sideline Assistant"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"flex-grow p-4 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg flex justify-around text-sm text-gray-400 font-mono mb-4",children:[e.jsxs("span",{children:["D: ",m.down]}),e.jsxs("span",{children:["Yds: ",m.distance]}),e.jsxs("span",{children:["Pos: Own ",m.fieldPosition]}),e.jsxs("span",{children:["Time: ",m.timeRemaining]}),e.jsxs("span",{children:["Score: ",m.score]})]}),x.map((N,y)=>e.jsxs("div",{className:"space-y-2",children:[N.user&&e.jsxs("p",{className:"text-right text-gray-300",children:["Coach: ",N.user]}),N.ai&&e.jsxs("p",{className:"text-left text-red-400 font-semibold",children:["Grid: ",N.ai]})]},y)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-700 p-3 rounded-xl animate-pulse",children:"..."})}),e.jsx("div",{ref:p})]}),e.jsxs("div",{className:"p-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{htmlFor:"proactive-alerts",className:"flex items-center cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",id:"proactive-alerts",className:"sr-only",checked:i,onChange:()=>d(!i)}),e.jsx("div",{className:"block bg-gray-600 w-14 h-8 rounded-full"}),e.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition ${i?"translate-x-full bg-red-500":""}`})]}),e.jsx("span",{className:"ml-3 text-gray-300",children:"Proactive Alerts"})]}),e.jsx("button",{onClick:c?v:R,className:`px-6 py-3 rounded-lg text-lg font-bold transition ${c?"bg-red-600 hover:bg-red-700":"bg-brand-primary hover:bg-brand-dark"}`,children:c?"Stop Listening":"Start Listening"})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:`Say things like "What's their tendency on 3rd & short?" or "Suggest a play call."`})]})]})})},Rt=({ai:s,closeModal:a})=>{const[l,c]=n.useState(null),[t,x]=n.useState(""),[o,i]=n.useState(""),[d,m]=n.useState(!1),u=n.useRef(null),r=h=>{if(h.target.files&&h.target.files[0]){const p=new FileReader;p.onloadend=()=>{c(p.result)},p.readAsDataURL(h.target.files[0])}},g=async()=>{if(!(!l||!t)){m(!0),i("");try{const h=l.split(",")[1],p=l.split(";")[0].split(":")[1],j=await s.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:p,data:h}},{text:t}]}});i(j.text)}catch(h){i(H(h))}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ds,{})," Analyze Play/Film Image"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"flex-grow p-4 grid grid-cols-2 gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex-grow bg-gray-900 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-600",children:l?e.jsx("img",{src:l,alt:"upload",className:"max-h-full max-w-full object-contain"}):e.jsx("p",{className:"text-gray-500",children:"Upload an image to analyze"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:r,ref:u,className:"hidden"}),e.jsx("button",{onClick:()=>{var h;return(h=u.current)==null?void 0:h.click()},className:"w-full bg-blue-600 hover:bg-blue-700 py-2 rounded-lg font-semibold",children:"Upload Image"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("textarea",{value:t,onChange:h=>x(h.target.value),placeholder:"Enter your prompt... e.g., 'What defensive formation is this? Who is the MIKE linebacker? What are the weaknesses?'",className:"w-full h-32 p-2 bg-gray-900 rounded-lg border border-gray-600 resize-none"}),e.jsx("button",{onClick:g,disabled:d||!l||!t,className:"w-full bg-brand-primary hover:bg-brand-dark py-2 rounded-lg font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed",children:d?"Analyzing...":"Analyze"}),e.jsx("div",{className:"flex-grow bg-gray-900 rounded-lg p-4 overflow-y-auto border border-gray-600",children:d?e.jsx("div",{className:"animate-pulse text-gray-400",children:"AI is analyzing the image..."}):e.jsx("p",{className:"whitespace-pre-wrap",children:o})})]})]})]})})},zt=({ai:s,closeModal:a})=>{const[l,c]=n.useState(""),[t,x]=n.useState(""),[o,i]=n.useState(!1),d=async()=>{if(l){i(!0),x("");try{const u=await s.models.generateContent({model:"gemini-2.5-pro",contents:l,config:{thinkingConfig:{thinkingBudget:32768}}});x(u.text)}catch(u){x(H(u))}finally{i(!1)}}},m=async()=>{var u,r,g,h,p,j;if(t)try{const v=(j=(p=(h=(g=(r=(u=(await s.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:t}]}],config:{responseModalities:[le.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Kore"}}}}})).candidates)==null?void 0:u[0])==null?void 0:r.content)==null?void 0:g.parts)==null?void 0:h[0])==null?void 0:p.inlineData)==null?void 0:j.data;if(v){const R=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),N=await be(fe(v),R,24e3,1),y=R.createBufferSource();y.buffer=N,y.connect(R.destination),y.start()}}catch(k){console.error("TTS Error:",k),alert("Failed to play audio. Error: "+H(k))}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-3xl h-[85vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(X,{})," Deep Strategy Analysis"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-4 flex-grow overflow-hidden",children:[e.jsx("textarea",{value:l,onChange:u=>c(u.target.value),placeholder:"Enter a complex strategic prompt... e.g., 'Analyze our last 5 games. Our offense struggles against a 3-4 defense. Devise a complete game plan with new formations, key plays, and player-specific adjustments to counter it.'",className:"w-full h-40 p-2 bg-gray-900 rounded-lg border border-gray-600 resize-none"}),e.jsx("button",{onClick:d,disabled:o||!l,className:"w-full bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed",children:o?"Thinking...":"Generate Deep Analysis"}),e.jsxs("div",{className:"flex-grow bg-gray-900 rounded-lg p-4 overflow-y-auto border border-gray-600 relative",children:[t&&e.jsx("button",{onClick:m,className:"absolute top-2 right-2 p-2 bg-gray-700 hover:bg-gray-600 rounded-full",children:e.jsx(Pe,{size:18})}),o?e.jsx("div",{className:"animate-pulse text-gray-400",children:"AI is performing a deep analysis. This may take a moment..."}):e.jsx("p",{className:"whitespace-pre-wrap",children:t})]})]})]})})},Et=({ai:s,closeModal:a})=>{var u,r,g;const[l,c]=n.useState(""),[t,x]=n.useState(null),[o,i]=n.useState(!1),d=async()=>{if(l){i(!0),x(null);try{const h=await s.models.generateContent({model:"gemini-2.5-flash",contents:l,config:{tools:[{googleSearch:{}}]}});x(h)}catch(h){const p=H(h);x({text:p,candidates:[]})}finally{i(!1)}}},m=(g=(r=(u=t==null?void 0:t.candidates)==null?void 0:u[0])==null?void 0:r.groundingMetadata)==null?void 0:g.groundingChunks;return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-3xl h-[85vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ms,{})," Grounded Search Q&A"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-4 flex-grow overflow-hidden",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:l,onChange:h=>c(h.target.value),type:"text",placeholder:"Ask a question requiring up-to-date info... e.g., 'What are the latest trends in high school spread offenses in 2024?'",className:"w-full p-3 bg-gray-900 rounded-lg border border-gray-600"}),e.jsx("button",{onClick:d,disabled:o||!l,className:"bg-yellow-600 hover:bg-yellow-700 px-6 rounded-lg font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed",children:o?"...":"Search"})]}),e.jsxs("div",{className:"flex-grow bg-gray-900 rounded-lg p-4 overflow-y-auto border border-gray-600",children:[o&&e.jsx("div",{className:"animate-pulse text-gray-400",children:"Searching the web for the latest information..."}),t&&e.jsx("p",{className:"whitespace-pre-wrap",children:t.text}),m&&m.length>0&&e.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-400 mb-2",children:"Sources:"}),e.jsx("ul",{className:"space-y-2",children:m.map((h,p)=>{var j,k;return e.jsx("li",{className:"text-sm",children:e.jsxs("a",{href:(j=h.web)==null?void 0:j.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:[p+1,". ",(k=h.web)==null?void 0:k.title]})},p)})})]})]})]})]})})},Be="gridironIntelCoachChatHistory",Lt=({ai:s,aiName:a,gameFilms:l})=>{const[c,t]=n.useState(!1),[x,o]=n.useState([]),[i,d]=n.useState(""),[m,u]=n.useState(null),[r,g]=n.useState(!1),[h,p]=n.useState(!1),[j,k]=n.useState(null),[v,R]=n.useState(!1),N=n.useRef(null),y=n.useRef(null),S=n.useCallback(()=>{N.current&&(N.current.then(C=>C.close()),N.current=null),R(!1)},[]),w=n.useCallback(async()=>{if(!s)return;R(!0);const C=s.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{inputAudioTranscription:{},responseModalities:[le.AUDIO]},callbacks:{onopen:async()=>{const $=await navigator.mediaDevices.getUserMedia({audio:!0}),f=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),T=f.createMediaStreamSource($),M=f.createScriptProcessor(4096,1,1);T.connect(M),M.connect(f.destination),M.onaudioprocess=D=>{const z=D.inputBuffer.getChannelData(0),P=new Int16Array(z.length);for(let U=0;U<z.length;U++)P[U]=z[U]*32768;const G={data:pe(new Uint8Array(P.buffer)),mimeType:"audio/pcm;rate=16000"};C.then(U=>U.sendRealtimeInput({media:G}))}},onmessage:async $=>{var f;(f=$.serverContent)!=null&&f.inputTranscription&&d(T=>(T?T+" ":"")+$.serverContent.inputTranscription.text)},onerror:$=>{console.error("Live session error:",$),S()},onclose:()=>R(!1)}});N.current=C},[s,S]);n.useEffect(()=>()=>{v&&S()},[v,S]),n.useEffect(()=>{try{const C=localStorage.getItem(Be);o(C?JSON.parse(C):[{sender:"bot",text:`Hello Coach! I'm ${a}. Ask me a question or attach a game film to begin a deep-dive analysis.`}])}catch(C){console.error("Failed to load chat history:",C),o([{sender:"bot",text:`Hello Coach! I'm ${a}.`}])}},[a]),n.useEffect(()=>{x.length>1&&localStorage.setItem(Be,JSON.stringify(x))},[x]),n.useEffect(()=>{if(s&&!m){const C=x.map(T=>({role:T.sender==="user"?"user":"model",parts:[{text:T.text}]})),$=x.length>1?C:[],f=s.chats.create({model:"gemini-2.5-flash",history:$,config:{systemInstruction:`You are Grid, an expert AI football strategist. Your name is ${a}. Analyze the provided game film data and user queries to provide in-depth, actionable advice. Break down complex situations, suggest specific plays, and identify opponent weaknesses based on the data provided.`}});u(f)}},[s,m,a,x]),n.useEffect(()=>{var C;(C=y.current)==null||C.scrollIntoView({behavior:"smooth"})},[x]);const A=async()=>{if(!i.trim()||!m||r)return;v&&S();let C=i;j&&(C=`Based on the following game film analysis, answer the user's question.

FILM DATA: "${j.title}"
${j.summary||""}

QUESTION: ${i}`);const $={sender:"user",text:i};o(f=>[...f,$]),d(""),k(null),g(!0);try{const T={sender:"bot",text:(await m.sendMessage({message:C})).text};o(M=>[...M,T])}catch(f){const T={sender:"bot",text:H(f)};o(M=>[...M,T])}finally{g(!1)}},B=C=>{k(C),p(!1)};return c?e.jsxs("div",{className:"fixed bottom-8 right-8 w-96 h-[600px] bg-gray-800 rounded-xl shadow-2xl flex flex-col z-40 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-bold",children:a}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 rounded-full hover:bg-gray-600",children:e.jsx(O,{size:18})})]}),e.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[x.map((C,$)=>e.jsx("div",{className:`flex ${C.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-3 rounded-xl ${C.sender==="user"?"bg-blue-600 text-white":"bg-gray-700"}`,children:C.text})},$)),r&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-700 p-3 rounded-xl animate-pulse",children:"..."})}),e.jsx("div",{ref:y})]}),e.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-800 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[h&&e.jsxs("div",{className:"absolute bottom-full w-full mb-2 bg-gray-700 rounded-lg shadow-xl border border-gray-600 z-10",children:[e.jsx("div",{className:"p-2 border-b border-gray-600 text-center text-sm font-semibold",children:"Select Film to Analyze"}),e.jsx("div",{className:"max-h-48 overflow-y-auto p-2",children:l.map(C=>e.jsx("button",{onClick:()=>B(C),className:"w-full text-left p-2 text-sm rounded hover:bg-brand-primary transition",children:C.title},C.id))})]}),j&&e.jsxs("div",{className:"bg-gray-600 px-3 py-1 rounded-t-lg text-sm flex items-center justify-between",children:[e.jsxs("span",{className:"truncate text-gray-200",children:["Analyzing: ",j.title]}),e.jsx("button",{onClick:()=>k(null),className:"p-1 rounded-full hover:bg-red-500/50",children:e.jsx(O,{size:14})})]}),e.jsxs("div",{className:`flex items-center gap-2 p-2 bg-gray-700 ${j?"rounded-b-lg":"rounded-lg"}`,children:[e.jsx("button",{onClick:()=>p(C=>!C),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-full transition",title:"Attach Film",children:e.jsx(As,{size:20})}),e.jsx("button",{onClick:v?S:w,className:`p-2 rounded-full hover:bg-gray-600 transition ${v?"text-red-500":"text-gray-400 hover:text-white"}`,title:v?"Stop Listening":"Use Voice",children:v?e.jsx(Xe,{size:20}):e.jsx(ie,{size:20})}),e.jsx("input",{type:"text",value:i,onChange:C=>d(C.target.value),onKeyDown:C=>C.key==="Enter"&&A(),placeholder:"Ask a question...",className:"w-full bg-transparent focus:outline-none text-white"}),e.jsx("button",{onClick:A,disabled:r||!i.trim(),className:"bg-brand-primary p-2 rounded-lg hover:bg-brand-dark disabled:bg-gray-500 disabled:cursor-not-allowed text-white",children:e.jsx(Ze,{size:20})})]})]})})]}):e.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-8 right-8 bg-brand-primary text-white p-4 rounded-full shadow-lg hover:bg-brand-dark transition-transform hover:scale-110",children:e.jsx(Je,{size:28})})},Gt=()=>{const[s,a]=n.useState("coach"),l=ge(),c=o=>{o.preventDefault(),l(s==="coach"?"/dashboard":"/player-dashboard")},t="w-full p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary";return e.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-gray-900/[0.2]"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center bg-black [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),e.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 space-y-8 bg-gray-900/80 backdrop-blur-sm rounded-2xl border border-gray-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(K,{to:"/",className:"inline-block mb-4 text-3xl font-bold text-white",children:"ðŸˆ Gridiron Intel"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-400",children:"Sign in to access your dashboard."})]}),e.jsxs("div",{className:"flex p-1 bg-gray-800 rounded-lg",children:[e.jsx("button",{onClick:()=>a("coach"),className:`w-1/2 p-2 rounded-md font-semibold transition ${s==="coach"?"bg-brand-primary text-white":"text-gray-400"}`,children:"Coach Login"}),e.jsx("button",{onClick:()=>a("player"),className:`w-1/2 p-2 rounded-md font-semibold transition ${s==="player"?"bg-brand-primary text-white":"text-gray-400"}`,children:"Player Login"})]}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email or Username"}),e.jsx("input",{type:"text",required:!0,className:t,placeholder:"you@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Password"}),e.jsx("input",{type:"password",required:!0,className:t,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-brand-primary hover:bg-brand-dark text-white rounded-lg font-bold transition",children:["Sign In as ",s==="coach"?"Coach":"Player"]})]}),e.jsx("div",{className:"text-center text-gray-400 text-sm",children:e.jsx("p",{children:"To get an account, please contact your program administrator."})})]})]})};var Ue={};const $t=`### Offensive Tendencies
- Favors 'Spread' offense, utilizing RPOs on 70% of 1st downs.
- QB #7 is mobile to his right but stares down his primary target.
- Limited route tree, heavily reliant on 'Slant' and 'Go' routes.

### Defensive Tendencies
- Primarily a 'Cover 3' zone defense, vulnerable to underneath passes.
- Susceptible to screen passes, especially to the wide side of the field.
- DE #92 has a slow get-off but a powerful bull rush.`,Ft="Northwood Panthers",Ot=[{id:1,name:"Flood Concept",type:"Offense",subType:"Pass",formation:"Spread",description:"Floods one side with 3 routes at different depths to stress zone coverage.",formationMarkers:[{id:"qb1",type:"offense",label:"QB",x:50,y:85},{id:"wr1",type:"offense",label:"WR",x:15,y:60},{id:"te1",type:"offense",label:"TE",x:40,y:62},{id:"wr2",type:"offense",label:"WR",x:85,y:60}],paths:[{markerId:"wr1",points:[{x:15,y:60},{x:15,y:40},{x:35,y:20}]},{markerId:"te1",points:[{x:40,y:62},{x:40,y:50},{x:25,y:50}]},{markerId:"wr2",points:[{x:85,y:60},{x:70,y:60}]}]},{id:2,name:"HB Dive",type:"Offense",subType:"Run",formation:"I-Form",description:"A direct handoff to the halfback running through an interior gap.",formationMarkers:[{id:"qb2",type:"offense",label:"QB",x:50,y:85},{id:"rb2",type:"offense",label:"RB",x:50,y:90}],paths:[{markerId:"rb2",points:[{x:50,y:90},{x:50,y:65}]}]},{id:3,name:"Cover 3 Buzz",type:"Defense",subType:"Zone",formation:"4-3",description:"Zone defense with 3 deep defenders and a safety rotating down to cover short passes.",formationMarkers:[{id:"s1",type:"defense",label:"S",x:50,y:20},{id:"s2",type:"defense",label:"S",x:25,y:35},{id:"cb1",type:"defense",label:"CB",x:10,y:30},{id:"cb2",type:"defense",label:"CB",x:90,y:30}],paths:[{markerId:"s2",points:[{x:25,y:35},{x:30,y:50}]}]}],Bt=[{id:1,name:"Box Squats",description:"Focus on explosive power out of the bottom.",sets:"4",reps:"6-8"},{id:2,name:"Bench Press",description:"Maintain a stable base, drive with your legs.",sets:"4",reps:"6-8"},{id:3,name:"Power Cleans",description:"Focus on triple extension: ankles, knees, and hips.",sets:"5",reps:"3"},{id:4,name:"Route Tree Drills",description:"Run the full route tree (0-9). Focus on sharp cuts and sinking hips.",sets:"2",reps:"Full Tree"}],Le=s=>{console.error("API Error:",s);let a;if(s instanceof Error)a=s.message;else if(s&&typeof s=="object"&&"message"in s)a=String(s.message);else if(typeof s=="string")a=s;else return"An unknown error occurred. Please check the console for details.";return a.includes("429")||a.includes("RESOURCE_EXHAUSTED")?"You've exceeded your request limit. Please wait a moment before trying again. For more info, check your Google AI Studio plan and billing details.":a.includes("400")||a.includes("INVALID_ARGUMENT")?"There was an issue with the request. Please check your input and try again. The API returned: "+a:a.includes("Requested entity was not found")||a.includes("API key not valid")?"There's an issue with the API key. Please ensure it's correctly configured and has access to the requested models.":a},de=({icon:s,title:a,value:l,color:c})=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center transition-transform hover:-translate-y-1",children:[e.jsx(s,{className:`w-8 h-8 mx-auto mb-3 ${c}`}),e.jsx("div",{className:"text-gray-400 text-sm",children:a}),e.jsx("div",{className:"text-3xl font-bold text-white",children:l})]}),Ut=({opponentName:s,gamePlan:a,isLoading:l})=>l?e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-700 rounded w-3/4 mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/2 mb-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-full"})]})]}),e.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-lg",children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/2 mb-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-4/6"})]})]})]})]}):a?e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Game Plan vs. ",s]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[e.jsx(he,{})," Opponent Intel"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-green-400 mb-2",children:"Offensive Tendencies"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:a.offensiveTendencies.map((c,t)=>e.jsx("li",{children:c},t))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-red-400 mb-2",children:"Defensive Tendencies"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:a.defensiveTendencies.map((c,t)=>e.jsx("li",{children:c},t))})]})]})]}),e.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-lg",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Ls,{})," My Positional Briefing"]}),e.jsxs("p",{className:"text-gray-200 leading-relaxed italic mb-4",children:['"',a.positionalBriefing.summary,'"']}),e.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-300",children:a.positionalBriefing.keyPoints.map((c,t)=>e.jsx("li",{children:c},t))})]})]})]}):e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Game Plan vs. ",s]}),e.jsx("p",{className:"text-red-400",children:"Could not load AI-generated game plan. Please try refreshing."})]}),Yt=({play:s,ai:a,closeModal:l,playerPosition:c})=>{const[t,x]=n.useState(""),[o,i]=n.useState(!0);return n.useEffect(()=>{(async()=>{i(!0),x("");const m=`You are an expert football coach. Analyze the following play called '${s.name}' for a ${c}. Here is the description: '${s.description}'. Explain the player's primary responsibilities, key reads against common defenses, and common mistakes to avoid. Structure your response with clear headings for: 1. Key Objective, 2. My Responsibilities, 3. Reads & Progressions, 4. Coaching Points. Keep it concise and actionable for a high school player.`;try{const u=await a.models.generateContent({model:"gemini-2.5-pro",contents:m});x(u.text)}catch(u){x(Le(u))}finally{i(!1)}})()},[a,s,c]),e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-2xl h-[80vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(X,{})," AI Play Analyst: ",s.name]}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-grow overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Play Diagram:"}),e.jsx(ye,{formationMarkers:s.formationMarkers,paths:s.paths})]}),o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-brand-primary rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AI is breaking down the play for you..."})]}):e.jsx("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed",children:t})})]})]})})},qt=()=>{const[s,a]=n.useState(null),[l,c]=n.useState(null),[t,x]=n.useState(null),[o,i]=n.useState(null),[d,m]=n.useState(Ot),[u,r]=n.useState([{id:1,description:"Increase 40-yard dash time",target:4.6,current:4.8},{id:2,description:"Improve completion percentage",target:75,current:72},{id:3,description:"Reduce missed tackles",target:5,current:8}]),[g,h]=n.useState(Bt),[p,j]=n.useState(null),[k,v]=n.useState(null),[R,N]=n.useState(!0);n.useEffect(()=>{i(Ee[0]),Ue.API_KEY&&x(new Te({apiKey:Ue.API_KEY}))},[]),n.useEffect(()=>{t&&o&&(async()=>{if(!t||!o)return;N(!0);const T=`You are an AI football coach analyzing a raw scouting report for our upcoming game. Extract key tendencies and create a personalized briefing for one of our players. The player is a ${o.position}.

            Raw Scouting Report:
            ---
            ${$t}
            ---

            Based on this report, generate a JSON object with the following structure:
            {
              "offensiveTendencies": ["List of opponent's offensive tendencies."],
              "defensiveTendencies": ["List of opponent's defensive tendencies."],
              "positionalBriefing": {
                "summary": "A concise one-sentence summary of the player's main focus for the game.",
                "keyPoints": [
                    "A list of 2-3 specific, actionable bullet points for the ${o.position}.",
                    "Each point should tell them what to watch for or how to exploit a weakness."
                ]
              }
            }`;try{const M=await t.models.generateContent({model:"gemini-2.5-pro",contents:T,config:{responseMimeType:"application/json",responseSchema:{type:I.OBJECT,properties:{offensiveTendencies:{type:I.ARRAY,items:{type:I.STRING}},defensiveTendencies:{type:I.ARRAY,items:{type:I.STRING}},positionalBriefing:{type:I.OBJECT,properties:{summary:{type:I.STRING},keyPoints:{type:I.ARRAY,items:{type:I.STRING}}},required:["summary","keyPoints"]}},required:["offensiveTendencies","defensiveTendencies","positionalBriefing"]}}}),D=JSON.parse(M.text);v(D)}catch(M){console.error("Error generating game plan:",M),v(null)}finally{N(!1)}})()},[t,o]);const y=(f,T=null)=>{c(T),a(f)},S=()=>{a(null),c(null)},w=(f,T)=>{r(M=>M.map(D=>D.id===f?{...D,current:T}:D))},A=(f,T)=>{const M={id:Date.now(),description:f,target:T,current:0};r(D=>[...D,M])},B=f=>{r(T=>T.filter(M=>M.id!==f))},C=n.useCallback((f,T)=>{j(T)},[]);if(!o)return e.jsx("div",{className:"bg-gray-900 text-white min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Please Log In"}),e.jsx(K,{to:"/login",className:"text-brand-primary hover:underline",children:"Go to Login Page"})]})});const $=()=>{if(!t&&s!=="settings"&&s!=="addGoal"&&s!=="playbook"&&s!=="trainingPlan"&&s!=="developmentPlan")return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"API Key Not Found"}),e.jsx("p",{className:"text-gray-300",children:"Please set your API_KEY environment variable."}),e.jsx("button",{onClick:S,className:"mt-6 bg-brand-primary px-6 py-2 rounded-lg",children:"Close"})]})});switch(s){case"playAnalyst":return l&&e.jsx(Yt,{play:l,ai:t,closeModal:S,playerPosition:o.position});case"addGoal":return e.jsx(_t,{onAddGoal:A,closeModal:S});case"playbook":return e.jsx(Ht,{plays:d,playerPosition:o.position,onAnalyzePlay:y,closeModal:S});case"trainingPlan":return e.jsx(Wt,{trainingPlan:g,closeModal:S});case"developmentPlan":return e.jsx(Kt,{player:o,goals:u,ai:t,initialPlan:p,onGenerate:C,closeModal:S});default:return null}};return e.jsxs("div",{className:"bg-gray-900 text-white min-h-screen",children:[e.jsx("nav",{className:"bg-gray-800 border-b-4 border-brand-primary shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"ðŸˆ GRIDIRON INTEL"}),e.jsx("div",{className:"text-gray-400",children:"|"}),e.jsx("div",{className:"text-gray-300",children:"Player Dashboard"})]}),e.jsx(K,{to:"/login",className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"Log Out"})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-24 h-24 bg-brand-primary rounded-full flex items-center justify-center font-bold text-4xl mx-auto mb-3 border-4 border-gray-700",children:o.avatar}),e.jsx("h1",{className:"text-4xl font-bold",children:o.name}),e.jsx("p",{className:"text-lg text-brand-accent font-semibold",children:o.position})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(de,{icon:_e,title:"Total TDs",value:"18",color:"text-green-400"}),e.jsx(de,{icon:Ce,title:"Yards/Game",value:"95.2",color:"text-blue-400"}),e.jsx(de,{icon:ae,title:"Film Reviewed",value:"12 hrs",color:"text-purple-400"}),e.jsx(de,{icon:ns,title:"Player Rating",value:"8.7",color:"text-yellow-400"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(Ut,{opponentName:Ft,gamePlan:k,isLoading:R}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(xe,{})," My Plays"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.slice(0,4).map(f=>e.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-white",children:[f.name," ",e.jsx("span",{className:`text-xs ml-2 px-2 py-0.5 rounded-full ${f.type==="Offense"?"bg-blue-500/50":"bg-red-500/50"}`,children:f.type})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[f.formation," - ",f.subType]})]}),e.jsx("button",{onClick:()=>y("playAnalyst",f),className:"mt-3 bg-brand-primary hover:bg-brand-dark py-2 px-3 rounded-lg text-sm font-semibold",children:"Analyze with AI"})]},f.id))}),e.jsxs("button",{onClick:()=>y("playbook"),className:"w-full mt-4 bg-gray-700 hover:bg-gray-600 py-3 rounded-lg font-bold flex items-center justify-center gap-2",children:[e.jsx(Ie,{size:18})," View All Plays"]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ce,{})," My Performance Goals"]}),e.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto pr-2",children:u.map(f=>{const T=f.target>0?Math.min(f.current/f.target*100,100):0,M=f.current>=f.target;return e.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("p",{className:"font-semibold text-white",children:f.description}),e.jsx("button",{onClick:()=>B(f.id),className:"text-gray-500 hover:text-red-500 flex-shrink-0 ml-2",children:e.jsx(re,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"flex-grow bg-gray-600 rounded-full h-3 relative",children:e.jsx("div",{className:`${M?"bg-green-500":"bg-brand-primary"} h-3 rounded-full transition-all duration-500`,style:{width:`${T}%`}})}),e.jsxs("div",{className:`text-sm font-bold ${M?"text-green-400":"text-white"}`,children:[Math.round(T),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300",children:[e.jsxs("div",{children:[e.jsx("span",{children:"Current: "}),e.jsx("input",{type:"number",value:f.current,onChange:D=>w(f.id,Number(D.target.value)),className:"w-20 ml-1 bg-gray-600 rounded-md text-center border border-gray-500"})]}),e.jsxs("span",{className:"font-semibold",children:["Target: ",f.target]})]})]},f.id)})}),e.jsxs("button",{onClick:()=>y("addGoal"),className:"w-full mt-4 bg-gray-700 hover:bg-gray-600 py-2 rounded-lg font-bold flex items-center justify-center gap-2",children:[e.jsx(Ie,{size:18})," Add New Goal"]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ue,{})," Training Plan"]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:g.map(f=>e.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[e.jsx("p",{className:"font-bold text-white",children:f.name}),e.jsxs("p",{className:"text-sm text-brand-accent",children:[f.sets," sets of ",f.reps]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.description})]},f.id))}),e.jsxs("button",{onClick:()=>y("trainingPlan"),className:"w-full mt-4 bg-gray-700 hover:bg-gray-600 py-2 rounded-lg font-bold flex items-center justify-center gap-2",children:[e.jsx(ae,{size:18})," View Detailed Plan"]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(X,{})," AI Development Plan"]}),p&&e.jsx("button",{onClick:()=>y("developmentPlan"),className:"bg-gray-700 hover:bg-gray-600 text-sm py-1 px-3 rounded-lg font-semibold",children:"View Details"})]}),p?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-brand-accent mb-1",children:"Key Focus Areas:"}),e.jsx("ul",{className:"list-disc list-inside text-gray-300 text-sm",children:p.focusAreas.map((f,T)=>e.jsx("li",{children:f},T))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-brand-accent mt-3 mb-1",children:"Top Drill Recommendation:"}),p.drills&&p.drills.length>0?e.jsxs("div",{className:"bg-gray-700/50 p-3 rounded-md text-sm",children:[e.jsx("p",{className:"font-bold text-white",children:p.drills[0].name}),e.jsx("p",{className:"text-gray-400 text-xs",children:p.drills[0].description})]}):e.jsx("p",{className:"text-gray-400 text-sm",children:"No specific drills generated."})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Generate a personalized development plan to enhance your skills."}),e.jsx("button",{onClick:()=>y("developmentPlan"),disabled:!t,className:"bg-brand-primary hover:bg-brand-dark py-2 px-4 rounded-lg font-bold disabled:bg-gray-600",children:"Generate Plan"})]})]})]})]}),$(),e.jsx(Vt,{ai:t,playerName:o.name,playerPosition:o.position})]})]})},_t=({onAddGoal:s,closeModal:a})=>{const[l,c]=n.useState(""),[t,x]=n.useState(""),o=i=>{i.preventDefault(),l.trim()&&t&&(s(l,Number(t)),a())};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-md rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ie,{})," Add New Goal"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Goal Description"}),e.jsx("input",{type:"text",value:l,onChange:i=>c(i.target.value),required:!0,className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600",placeholder:"e.g., Increase bench press max"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Target Value"}),e.jsx("input",{type:"number",value:t,onChange:i=>x(i.target.value),required:!0,className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600",placeholder:"e.g., 225"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold",children:"Add Goal"})})]})]})})},Ht=({plays:s,playerPosition:a,onAnalyzePlay:l,closeModal:c})=>{const[t,x]=n.useState("All"),o=s.filter(i=>(t==="All"||i.type===t)&&(i.formationMarkers.some(d=>d.label.toUpperCase()===a.toUpperCase())||t!=="All"));return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(xe,{})," My Playbook"]}),e.jsx("button",{onClick:c,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-grow overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-1 bg-gray-700 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>x("All"),className:`px-3 py-1 text-sm rounded-md ${t==="All"?"bg-brand-primary":""}`,children:"All"}),e.jsx("button",{onClick:()=>x("Offense"),className:`px-3 py-1 text-sm rounded-md ${t==="Offense"?"bg-brand-primary":""}`,children:"Offense"}),e.jsx("button",{onClick:()=>x("Defense"),className:`px-3 py-1 text-sm rounded-md ${t==="Defense"?"bg-brand-primary":""}`,children:"Defense"})]})}),e.jsx("div",{className:"flex-grow bg-gray-900/50 rounded-lg p-3 space-y-2 overflow-y-auto",children:o.map(i=>e.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-white",children:[i.name," ",e.jsx("span",{className:`text-xs ml-2 px-2 py-0.5 rounded-full ${i.type==="Offense"?"bg-blue-500/50":"bg-red-500/50"}`,children:i.type})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[i.formation," - ",i.subType]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:i.description})]}),e.jsx("button",{onClick:()=>l("playAnalyst",i),className:"p-2 text-brand-primary hover:text-white flex-shrink-0 ml-4",children:e.jsx(X,{size:18})})]}),e.jsx("div",{className:"mt-2",children:e.jsx(ye,{formationMarkers:i.formationMarkers,paths:i.paths})})]},i.id))})]})]})})},Wt=({trainingPlan:s,closeModal:a})=>e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ue,{})," My Training Plan"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsx("div",{className:"p-6 flex-grow overflow-y-auto space-y-4",children:s.map(l=>e.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:l.name}),e.jsxs("p",{className:"text-sm text-brand-accent",children:[l.sets," sets of ",l.reps]}),e.jsx("p",{className:"text-gray-300 mt-2",children:l.description}),l.videoUrl&&e.jsxs("a",{href:l.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline text-sm mt-2 flex items-center gap-1",children:[e.jsx(ae,{size:16})," Watch Demo"]})]},l.id))})]})}),Kt=({player:s,goals:a,ai:l,initialPlan:c,onGenerate:t,closeModal:x})=>{const[o,i]=n.useState(c||null),[d,m]=n.useState(!1),[u,r]=n.useState(null),g=n.useCallback(async()=>{m(!0),r(null),i(null);const h=a.map(v=>`${v.description} (Current: ${v.current}, Target: ${v.target})`).join("; "),p=s.stats.map(v=>`${v.name}: ${v.value}`).join(", "),j=s.radarData.map(v=>`${v.subject}: ${v.value} (vs League Avg: ${v.avg})`).join("; "),k=`You are an expert high school football coach and a player development AI. Create a personalized development plan for ${s.name}, a ${s.position}.
        
        Player's Stated Goals: ${h}.
        Player Stats: ${p}.
        Performance Radar: ${j}.
        
        Based on all of this data, generate a JSON object with the following structure:
        {
          "focusAreas": ["area1", "area2"],
          "drills": [
            {"name": "Drill Name", "description": "Short description", "whyItHelps": "How this drill addresses a goal or weakness", "mockVideoUrl": "https://www.youtube.com/watch?v=mockvideoid"},
            // ... more drills
          ],
          "motivation": "Encouraging message"
        }
        
        Provide 2-3 specific "focusAreas" that directly address the player's goals or weaknesses shown in the data. For "drills", include 3-5 unique drill recommendations. Each drill should have a unique 'mockVideoUrl' which is a valid YouTube URL (you can use placeholders like 'https://www.youtube.com/watch?v=dQw4w9WgXcQ' for now). Ensure the 'whyItHelps' directly relates to a focus area. The 'motivation' should be a brief, uplifting message.`;try{const v=await l.models.generateContent({model:"gemini-2.5-pro",contents:k,config:{responseMimeType:"application/json",responseSchema:{type:I.OBJECT,properties:{focusAreas:{type:I.ARRAY,items:{type:I.STRING}},drills:{type:I.ARRAY,items:{type:I.OBJECT,properties:{name:{type:I.STRING},description:{type:I.STRING},whyItHelps:{type:I.STRING},mockVideoUrl:{type:I.STRING}},required:["name","description","whyItHelps","mockVideoUrl"]}},motivation:{type:I.STRING}},required:["focusAreas","drills","motivation"]}}}),R=JSON.parse(v.text);i(R),t(s,R)}catch(v){r(Le(v))}finally{m(!1)}},[l,s,t,a]);return n.useEffect(()=>{c||g()},[c,g]),e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-4xl h-[90vh] rounded-xl shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ns,{})," AI Development Plan for ",s.name]}),e.jsx("button",{onClick:x,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"p-6 flex-grow overflow-y-auto",children:[u&&e.jsx("div",{className:"bg-red-500/20 text-red-300 text-sm p-3 rounded-lg mb-4",children:u}),d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-t-transparent border-brand-primary rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"AI is crafting a personalized plan..."})]}):o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-brand-accent mb-2",children:"Key Focus Areas:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:o.focusAreas.map((h,p)=>e.jsx("li",{children:h},p))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-brand-accent mb-2",children:"Personalized Drills:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.drills.map((h,p)=>e.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-white",children:h.name}),e.jsx("p",{className:"text-sm text-gray-300",children:h.description}),e.jsxs("p",{className:"text-xs text-brand-accent mt-1",children:["Why it helps: ",h.whyItHelps]}),e.jsx("a",{href:h.mockVideoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline text-sm mt-2 block",children:"Watch Video"})]},p))})]}),e.jsx("div",{className:"pt-2 border-t border-gray-700",children:e.jsx("p",{className:"text-lg font-semibold text-gray-200",children:o.motivation})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("p",{className:"text-gray-400 mb-4",children:["Generate an AI-powered development plan for ",s.name,"."]}),e.jsx("button",{onClick:g,className:"bg-brand-primary hover:bg-brand-dark py-2 px-4 rounded-lg font-bold",children:"Generate Plan"})]}),!d&&e.jsx("button",{onClick:g,className:"w-full mt-4 bg-gray-700 hover:bg-gray-600 py-2 rounded-lg font-bold",children:"Regenerate Plan"})]})]})})},Ye="gridironIntelPlayerChatHistory",Vt=({ai:s,playerName:a,playerPosition:l})=>{const[c,t]=n.useState(!1),[x,o]=n.useState([]),[i,d]=n.useState(""),[m,u]=n.useState(null),[r,g]=n.useState(!1),[h,p]=n.useState(!1),j=n.useRef(null),k=n.useRef(null),v=n.useCallback(()=>{j.current&&(j.current.then(y=>y.close()),j.current=null),p(!1)},[]),R=n.useCallback(async()=>{if(!s)return;p(!0);const y=s.live.connect({model:"gemini-2.5-flash-native-audio-preview-09-2025",config:{inputAudioTranscription:{},responseModalities:[le.AUDIO]},callbacks:{onopen:async()=>{const S=await navigator.mediaDevices.getUserMedia({audio:!0}),w=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),A=w.createMediaStreamSource(S),B=w.createScriptProcessor(4096,1,1);A.connect(B),B.connect(w.destination),B.onaudioprocess=C=>{const $=C.inputBuffer.getChannelData(0),f=new Int16Array($.length);for(let M=0;M<$.length;M++)f[M]=$[M]*32768;const T={data:pe(new Uint8Array(f.buffer)),mimeType:"audio/pcm;rate=16000"};y.then(M=>M.sendRealtimeInput({media:T}))}},onmessage:async S=>{var w;(w=S.serverContent)!=null&&w.inputTranscription&&d(A=>(A?A+" ":"")+S.serverContent.inputTranscription.text)},onerror:S=>{console.error("Live session error:",S),v()},onclose:()=>p(!1)}});j.current=y},[s,v]);n.useEffect(()=>()=>{h&&v()},[h,v]),n.useEffect(()=>{try{const y=localStorage.getItem(Ye);o(y?JSON.parse(y):[{sender:"bot",text:`Hey ${a}! I'm Grid, your AI assistant. Ask me anything about plays, opponent tendencies, or training.`}])}catch(y){console.error("Failed to load player chat history:",y),o([{sender:"bot",text:`Hey ${a}! I'm Grid, your AI assistant.`}])}},[a]),n.useEffect(()=>{x.length>1&&localStorage.setItem(Ye,JSON.stringify(x))},[x]),n.useEffect(()=>{if(s&&!m){const y=x.map(A=>({role:A.sender==="user"?"user":"model",parts:[{text:A.text}]})),S=x.length>1?y:[],w=s.chats.create({model:"gemini-2.5-flash",history:S,config:{systemInstruction:`You are Grid, an expert AI football assistant designed for high school players. Your name is Grid. You are speaking to ${a}, a ${l}. Provide clear, encouraging, and actionable advice related to plays, opponent strategies, and personal development plans. Keep explanations simple and direct.`}});u(w)}},[s,m,a,l,x]),n.useEffect(()=>{var y;(y=k.current)==null||y.scrollIntoView({behavior:"smooth"})},[x]);const N=async()=>{if(!i.trim()||!m||r)return;h&&v();const y={sender:"user",text:i};o(S=>[...S,y]),d(""),g(!0);try{const w={sender:"bot",text:(await m.sendMessage({message:i})).text};o(A=>[...A,w])}catch(S){const w={sender:"bot",text:Le(S)};o(A=>[...A,w])}finally{g(!1)}};return c?e.jsxs("div",{className:"fixed bottom-8 right-8 w-96 h-[600px] bg-gray-800 rounded-xl shadow-2xl flex flex-col z-40 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Grid AI Assistant"}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 rounded-full hover:bg-gray-600",children:e.jsx(O,{size:18})})]}),e.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[x.map((y,S)=>e.jsx("div",{className:`flex ${y.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[80%] p-3 rounded-xl ${y.sender==="user"?"bg-blue-600 text-white":"bg-gray-700"}`,children:y.text})},S)),r&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-700 p-3 rounded-xl animate-pulse",children:"..."})}),e.jsx("div",{ref:k})]}),e.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-800 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-700 rounded-lg",children:[e.jsx("button",{onClick:h?v:R,className:`p-2 rounded-full hover:bg-gray-600 transition ${h?"text-red-500":"text-gray-400 hover:text-white"}`,title:h?"Stop Listening":"Use Voice",children:h?e.jsx(Xe,{size:20}):e.jsx(ie,{size:20})}),e.jsx("input",{type:"text",value:i,onChange:y=>d(y.target.value),onKeyDown:y=>y.key==="Enter"&&N(),placeholder:"Ask a question...",className:"w-full bg-transparent focus:outline-none text-white"}),e.jsx("button",{onClick:N,disabled:r||!i.trim(),className:"bg-brand-primary p-2 rounded-lg hover:bg-brand-dark disabled:bg-gray-500 disabled:cursor-not-allowed text-white",children:e.jsx(Ze,{size:20})})]})})]}):e.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-8 right-8 bg-brand-primary text-white p-4 rounded-full shadow-lg hover:bg-brand-dark transition-transform hover:scale-110",children:e.jsx(Je,{size:28})})};var qe={};const Qt=()=>{const{playerId:s}=Gs(),[a,l]=n.useState(null),[c,t]=n.useState(null),[x,o]=n.useState(""),[i,d]=n.useState(!1);n.useEffect(()=>{const g=Ee.find(h=>h.id===parseInt(s||""));l(g||null)},[s]),n.useEffect(()=>{qe.API_KEY&&t(new Te({apiKey:qe.API_KEY}))},[]);const m=async()=>{if(!c||!a)return;d(!0),o("");const g=a.stats.map(j=>`${j.name}: ${j.value}`).join(", "),h=a.radarData.map(j=>`${j.subject}: ${j.value} (vs League Avg: ${j.avg})`).join("; "),p=`You are an elite NFL scout. Analyze the performance of high school football player ${a.name}, a ${a.position}.
        
        **Key Stats:** ${g}.
        **Performance Radar Insights:** ${h}.
        
        Based on all this data, provide a detailed, professional scouting report. Structure your response with the following sections using markdown headings:
        
        ### **Strengths**
        (List 3-4 key strengths with brief explanations, referencing specific stats or radar values where applicable)
        
        ### **Areas for Improvement**
        (List 2-3 specific, actionable areas for improvement, referencing specific stats or radar values where applicable)
        
        ### **Player Comparison**
        (Provide a realistic comparison to a current or former college/pro player whose style matches the data)

        ### **Overall Summary**
        (A concluding paragraph on their potential and what they need to do to reach the next level.)`;try{const j=await c.models.generateContent({model:"gemini-2.5-pro",contents:p});o(j.text)}catch(j){console.error("Error generating scouting report:",j),o("An error occurred while generating the report. Please check your API key and try again.")}finally{d(!1)}},u=({label:g,value:h})=>e.jsxs("div",{className:"flex justify-between items-baseline bg-gray-700 p-3 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:g}),e.jsx("span",{className:"font-semibold text-lg",children:h})]}),r=({label:g,value:h})=>e.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:g}),e.jsx("p",{className:"font-semibold mt-1 whitespace-pre-wrap",children:h})]});return a?e.jsxs("div",{className:"bg-gray-900 text-white min-h-screen",children:[e.jsx("nav",{className:"bg-gray-800 border-b-4 border-brand-primary shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(K,{to:"/dashboard",className:"flex items-center gap-2 text-gray-300 hover:text-white transition",children:[e.jsx($s,{size:20}),"Back to Coach Dashboard"]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:"ðŸˆ Player Profile"})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 text-center shadow-lg",children:[e.jsx("div",{className:"w-24 h-24 bg-brand-primary rounded-full flex items-center justify-center font-bold text-4xl mx-auto mb-4 border-4 border-gray-700",children:a.avatar}),e.jsx("h1",{className:"text-3xl font-bold",children:a.name}),e.jsx("p",{className:"text-lg text-brand-accent font-semibold",children:a.position})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Fs,{})," Player Details"]}),e.jsxs("div",{className:"space-y-3",children:[a.age&&e.jsx(u,{label:"Age",value:a.age}),a.height&&e.jsx(u,{label:"Height",value:a.height}),a.parentsName&&e.jsx(u,{label:"Parent/Guardian",value:a.parentsName}),a.phone&&e.jsx(u,{label:"Phone",value:a.phone}),a.notes&&e.jsx(r,{label:"Coach's Notes",value:a.notes})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Os,{})," Key Season Stats"]}),e.jsx("div",{className:"space-y-3",children:a.stats.map(g=>e.jsxs("div",{className:"flex justify-between items-baseline bg-gray-700 p-3 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:g.name}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"font-bold text-lg",children:g.value}),g.trend&&e.jsx("span",{className:"text-xs text-green-400",children:g.trend})]})]},g.name))})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(Bs,{})," Performance Radar vs. League Average"]}),e.jsx("div",{className:"h-96",children:e.jsx(Me,{width:"100%",height:"100%",children:e.jsxs(ss,{cx:"50%",cy:"50%",outerRadius:"80%",data:a.radarData,children:[e.jsx(ts,{gridType:"circle",stroke:"rgba(255,255,255,0.2)"}),e.jsx(as,{dataKey:"subject",tick:{fill:"#cbd5e1",fontSize:14}}),e.jsx(De,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151"}}),e.jsx(Re,{}),e.jsx(me,{name:"League Average",dataKey:"avg",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.4}),e.jsx(me,{name:a.name,dataKey:"value",stroke:"var(--color-brand-accent)",fill:"var(--color-brand-accent)",fillOpacity:.6})]})})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(X,{})," AI Scouting Report"]}),x?e.jsx("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed",children:x})}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Generate an in-depth analysis of this player's strengths and weaknesses using AI."}),e.jsx("button",{onClick:m,disabled:i||!c,className:"bg-brand-primary hover:bg-brand-dark text-white font-bold py-3 px-6 rounded-lg transition disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center gap-2 mx-auto",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin"}),"Generating Report..."]}):"Generate AI Report"}),!c&&e.jsx("p",{className:"text-xs text-red-400 mt-2",children:"API Key not configured."})]})]})]})]})})]}):e.jsx("div",{className:"bg-gray-900 text-white min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Player Not Found"}),e.jsx(K,{to:"/dashboard",className:"text-brand-accent hover:underline",children:"Return to Dashboard"})]})})},Jt=()=>{const s=ge(),[a,l]=n.useState(!1),c=o=>{if(o.preventDefault(),!a){alert("Please verify you are not a robot.");return}s("/admin")},t="w-full p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-primary";return e.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-gray-900/[0.2]"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center bg-black [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),e.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 space-y-8 bg-gray-900/80 backdrop-blur-sm rounded-2xl border border-red-800/50",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(K,{to:"/",className:"inline-block mb-4 text-3xl font-bold text-white",children:"ðŸˆ Gridiron Intel"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(he,{className:"text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Portal"})]}),e.jsx("p",{className:"text-gray-400",children:"Restricted Access"})]}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Admin Username"}),e.jsx("input",{type:"text",required:!0,className:t,defaultValue:"admin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Password"}),e.jsx("input",{type:"password",required:!0,className:t,defaultValue:"password"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-gray-700 p-3 rounded-lg border border-gray-600",children:[e.jsx("div",{onClick:()=>l(!a),className:`w-6 h-6 rounded border-2 ${a?"bg-brand-primary border-brand-primary":"border-gray-500"} cursor-pointer flex items-center justify-center`,children:a&&e.jsx(Us,{size:16})}),e.jsx("label",{htmlFor:"captcha",className:"text-gray-300",children:"I am not a robot"})]}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition disabled:bg-gray-600 disabled:cursor-not-allowed",disabled:!a,children:"Secure Sign In"})]})]})]})},Xt=[{id:1,name:"John Harbaugh",email:"j.harbaugh@ravens.com",team:"Baltimore Ravens High",status:"Active"},{id:2,name:"Andy Reid",email:"a.reid@chiefs.com",team:"Kansas City Chiefs Prep",status:"Active"},{id:3,name:"Sean McVay",email:"s.mcvay@rams.com",team:"Los Angeles Rams Academy",status:"Deactivated"}],Zt=({onAdd:s,closeModal:a})=>{const[l,c]=n.useState(""),[t,x]=n.useState(""),[o,i]=n.useState(""),[d,m]=n.useState(!1),u=r=>{r.preventDefault(),l&&t&&o&&(s({name:l,email:t,team:o}),m(!0))};return d?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-md rounded-xl shadow-2xl p-8 text-center",children:[e.jsx(ne,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Account Created!"}),e.jsxs("p",{className:"text-gray-400 mb-6",children:["An email invitation has been sent to ",t," to set up their account."]}),e.jsx("button",{onClick:a,className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold",children:"Done"})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-md rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ne,{})," Add New Coach"]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(O,{size:20})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:l,onChange:r=>c(r.target.value),required:!0,className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:t,onChange:r=>x(r.target.value),required:!0,className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Team Name"}),e.jsx("input",{type:"text",value:o,onChange:r=>i(r.target.value),required:!0,className:"w-full p-2 bg-gray-700 rounded-lg border border-gray-600"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"w-full bg-brand-primary hover:bg-brand-dark py-3 rounded-lg font-bold",children:"Create Coach Account"})})]})]})})},ea=()=>{const s=ge(),[a,l]=n.useState(Xt),[c,t]=n.useState(!1),[x,o]=n.useState([{id:1,timestamp:new Date().toLocaleString(),admin:"admin",action:"Admin logged in."}]),i=r=>{const g={id:Date.now(),timestamp:new Date().toLocaleString(),admin:"admin",action:r};o(h=>[g,...h])},d=r=>{const g={...r,id:Date.now(),status:"Active"};l(h=>[g,...h]),i(`Created new coach account: ${r.name} (${r.email})`),t(!1)},m=r=>{l(a.map(g=>{if(g.id===r){const h=g.status==="Active"?"Deactivated":"Active";return i(`${h} account for ${g.name}.`),{...g,status:h}}return g}))},u=r=>{window.confirm(`Are you sure you want to send a password reset to ${r}?`)&&(i(`Sent password reset to ${r}.`),alert("Password reset email has been sent."))};return e.jsxs("div",{className:"bg-gray-900 text-white min-h-screen",children:[e.jsx("nav",{className:"bg-gray-800 border-b-4 border-red-600 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"ðŸˆ GRIDIRON INTEL"}),e.jsx("div",{className:"text-gray-400",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2 text-red-400 font-semibold",children:[e.jsx(he,{size:18})," Admin Panel"]})]}),e.jsxs("button",{onClick:()=>s("/admin/login"),className:"flex items-center gap-2 text-gray-300 hover:text-white transition",children:[e.jsx(Ys,{size:20}),"Log Out"]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Coach Management"}),e.jsxs("button",{onClick:()=>t(!0),className:"bg-brand-primary hover:bg-brand-dark text-white font-bold py-2 px-4 rounded-lg transition flex items-center gap-2",children:[e.jsx(ne,{size:18})," Add New Coach"]})]}),e.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Name"}),e.jsx("th",{className:"p-4",children:"Email"}),e.jsx("th",{className:"p-4",children:"Team"}),e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50",children:[e.jsx("td",{className:"p-4 font-semibold",children:r.name}),e.jsx("td",{className:"p-4 text-gray-300",children:r.email}),e.jsx("td",{className:"p-4 text-gray-300",children:r.team}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.status==="Active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:r.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>m(r.id),title:r.status==="Active"?"Deactivate":"Activate",className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-full transition",children:r.status==="Active"?e.jsx(qs,{size:16}):e.jsx(_s,{size:16})}),e.jsx("button",{onClick:()=>u(r.name),title:"Reset Password",className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-full transition",children:e.jsx(Hs,{size:16})})]})})]},r.id))})]})})})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(Ws,{})," Audit Log"]}),e.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg p-4 h-[500px] overflow-y-auto",children:e.jsx("ul",{className:"space-y-3",children:x.map(r=>e.jsxs("li",{className:"text-sm p-2 bg-gray-900/50 rounded-md",children:[e.jsx("p",{className:"text-gray-300",children:r.action}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.timestamp," by ",r.admin]})]},r.id))})})]})]})}),c&&e.jsx(Zt,{onAdd:d,closeModal:()=>t(!1)})]})},sa=()=>e.jsx(Ks,{children:e.jsxs(Vs,{children:[e.jsx(te,{path:"/",element:e.jsx(Js,{})}),e.jsx(te,{path:"/login",element:e.jsx(Gt,{})}),e.jsx(te,{path:"/dashboard",element:e.jsx(Nt,{})}),e.jsx(te,{path:"/player-dashboard",element:e.jsx(qt,{})}),e.jsx(te,{path:"/player/:playerId",element:e.jsx(Qt,{})}),e.jsx(te,{path:"/admin/login",element:e.jsx(Jt,{})}),e.jsx(te,{path:"/admin",element:e.jsx(ea,{})})]})}),ls=document.getElementById("root");if(!ls)throw new Error("Could not find root element to mount to");const ta=Qs.createRoot(ls);ta.render(e.jsx(He.StrictMode,{children:e.jsx(sa,{})}));
